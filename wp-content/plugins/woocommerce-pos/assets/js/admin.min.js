!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){c(4);var d=c(2),e=c(17),f=c(1),g=c(6),h=c(9),i=c(10),j=c(18),k=new e;k.entities=new f({app:k}),k.settingsApp=new j({container:k.layout.getRegion("main")}),k.modalApp=new g({container:k.layout.getRegion("modal")}),k.tabsService=new h,k.buttonsService=new i,a.exports=window.POS=d.create(k)},function(a,b,c){(function(b){var d=c(26),e=c(27),f=c(28),g=c(29),h=c(30),i=c(31),j=c(32),k=c(33),l=c(34),m=c(35),n=c(36),o=c(73)("entities"),p=c(2),q=c(19),r=b.localStorage||window.localStorage,s=b.JSON||window.JSON,t=d.extend({channelName:"entities",initialize:function(){this.channel.reply("get",this.get,this),this.channel.comply("set",this.set,this),this.channel.comply("remove",this.remove,this),this.channel.comply("set:filter",this.setFilter,this)},collections:{products:e,orders:f,cart:g,customers:h,coupons:i,gateways:l,variations:m,settings:k},getMethods:{collection:"getCollection",model:"getModel",filtered:"getFiltered",variations:"getVariations",option:"getOption",settings:"getSettings",localStorage:"getLocalStorage"},setMethods:{localStorage:"setLocalStorage"},get:function(a){a=a||{};var b=this.getMethods[a.type];return this[b]?this[b](a):void o('request needs a type, eg: "collection" or "option"')},set:function(a){a=a||{};var b=this.setMethods[a.type];return this[b]?this[b](a):void o('set needs a type, eg: "localStorage"')},attach:function(a){var b="model"===a.type?"models":"collections",c="_"+a.name;return this[b].hasOwnProperty(a.name)&&(this[c]=new this[b][a.name]([],a)),this[c]},getCollection:function(a){var b="_"+a.name;return a.init?new this.collections[a.name]([],a):this[b]||this.attach(a)},getModel:function(a){var b="_"+a.name;return a.init?new this.models[a.name]([],a):this[b]||this.attach(a)},getFiltered:function(a){var b="_"+a.name,c="_filtered"+a.name;return this[c]?this[c]:(this[b]||this.attach(a),this[c]=new n(this[b],a),this[c])},getOption:function(a){return this.app.getOption(a.name)},getSettings:function(a){var b=this.app.getOption(a.name);return new j(b)},setFilter:function(a){a=a||{};var b="_filtered"+a.name;this[b]&&this[b].filterBy("search",a.filter)},getLocalStorage:function(a){a=a||{};var b=r.getItem("wc_pos_"+a.name),c=s.parse(b)||void 0;return a.key&&c&&c[a.key]?c[a.key]:c},setLocalStorage:function(a){a=a||{};var b=this.getLocalStorage({name:a.name})||{};q.isObject(b)?q.extend(b,a.data):b=a.data,r.setItem("wc_pos_"+a.name,s.stringify(b))},remove:function(a){if(a=a||{},"localStorage"===a.type&&a.name&&a.key){var b=this.getLocalStorage({name:a.name});delete b[a.key],r.setItem("wc_pos_"+a.name,s.stringify(b))}else r.removeItem("wc_pos_"+a.name)},getVariations:function(a){var b=a.parent.get("id");if(!this._variations||!this._variations[b]){var c=new m(a.parent.get("variations"),a);this._variations=this._variations||{},this._variations[b]=new n(c,a)}return this._variations[b]}});a.exports=t,p.attach("Entities.Service",t)}).call(b,function(){return this}())},function(a,b,c){var d=d||"",e=c(19),f=c(73),g=c(20),h=c(21);window.wc_pos_debug&&f.enable("*");var i=f().enabled;h.DEBUG=i,console.info("Debugging is "+(i?"on":"off")+", visit http://woopos.com.au/docs/debugging"),a.exports={VERSION:d,attach:function(a,b){a=a.split(".");var c=e.reduceRight(a,function(a,b){var c={};return c[b]=a,c},b||{});g.extend(!0,this,c)},create:function(a){return e.defaults(a,this)},debug:f,getOption:function(){}}},,function(a,b,c){var d=c(19);d.mixin({merge:c(72)})},,function(a,b,c){var d=c(26),e=c(25),f=c(38),g=c(39),h=c(20),i=c(19),j=c(21).channel("global");a.exports=d.extend({channelName:"modal",initialize:function(a){this.container=a.container,this.start()},onStart:function(){this.channel.reply({open:this.open,close:this.close,alert:this.alert,confirm:this.confirm,prompt:this.prompt},this),this.layout=new f,this.container.show(this.layout),this.channel.comply({update:this.layout.update},this.layout),j.on({error:this.error},this),this.listenTo(e.history,{route:this.onRoute})},onStop:function(){delete this.layout,this.container.reset(),this.channel.reset()},onRoute:function(){this.fragment!==e.history.fragment&&this.close()},open:function(a){var b=this;return this.fragment=e.history.fragment,this.close().then(function(){return b.isOpen=!0,b.layout.open(a)})},close:function(){return this.isOpen?(this.isOpen=!1,this.layout.close()):h.Deferred().resolve()},error:function(a){a=a||{},a.jqXHR&&this.parseXHR(a);var b=new g({className:"error",title:a.status,message:a.message,raw:a.raw});this.open(b)},parseXHR:function(a){i.isObject(a.thrownError)?(a.status=a.thrownError.name,a.message=a.thrownError.message):(a.status=a.jqXHR.statusText,a.jqXHR.responseJSON&&a.jqXHR.responseJSON.errors[0]&&(a.message=a.jqXHR.responseJSON.errors[0].message)),a.raw=a.jqXHR.responseText}})},,,function(a,b,c){var d=c(26),e=c(45),f=c(46);a.exports=d.extend({channelName:"tabs",initialize:function(){this.channel.reply({view:this.tabsView},this)},tabsView:function(a){return a=a||{},new e({collection:this.tabsCollection(a)})},tabsCollection:function(a){return new f(a.tabs)}})},function(a,b,c){var d=c(26),e=c(47);a.exports=d.extend({channelName:"buttons",initialize:function(){this.channel.reply({view:this.view},this)},view:function(a){var b=new e(a);return b}})},,,,,,,function(a,b,c){var d=c(41),e=c(25),f=c(63),g=c(73)("admin"),h=c(23),i=c(21),j=i.channel("router"),k=c(43);a.exports=d.extend({initialize:function(){this.layout=new f,this.layout.render(),this.listenTo(j,{"before:enter:route":this.onBeforeEnterRoute,"enter:route":this.onEnterRoute,"error:route":this.onErrorRoute})},onBeforeStart:function(){g("starting WooCommerce POS admin app"),k.extend(this.options.i18n),h.settings=this.options.accounting},onStart:function(){e.history.start()},onBeforeEnterRoute:function(){this.transitioning=!0},onEnterRoute:function(){this.transitioning=!1},onErrorRoute:function(){this.transitioning=!1}})},function(a,b,c){var d=c(2),e=c(51),f=c(64),g=c(65),h=c(66),i=c(67),j=c(68),k=c(69),l=c(25),m=l.Radio,n=c(20),o=c(19),p=e.extend({initialize:function(a){this.container=a.container,this.collection=m.request("entities","get",{type:"collection",name:"settings"})},onBeforeEnter:function(){this.bootstrapTabs(),this.bootstrapSettings(),this.layout=new f,this.listenTo(this.layout,"show",this.showTabs),this.container.show(this.layout)},bootstrapTabs:function(){var a=[],b=l.history.getFragment()||"general";n(".tmpl-wc-pos-settings").each(function(){a.push({id:n(this).data("id"),label:n(this).data("label"),active:n(this).data("id")===b})}),this.tabsArray=a},bootstrapSettings:function(){var a=window.wc_pos_settings;o.each(a,function(a,b){var c=this.collection.add(a);c.set({id:b}),c._isNew=!1},this)},routes:{"":"showGeneral",general:"showGeneral",checkout:"showCheckout",hotkeys:"showHotkeys",access:"showAccess",tools:"showTools"},onBeforeRoute:function(){this.layout.getRegion("footer").empty()},showTabs:function(){var a=m.request("tabs","view",{tabs:this.tabsArray});this.listenTo(a,"show",function(){a.$el.addClass("nav-tab-wrapper"),a.children.each(function(a){a.$el.addClass("nav-tab")})}),this.listenTo(a.collection,"change:active",function(a,b){b&&this.navigate(a.id,{trigger:!0,replace:!0})}),this.layout.getRegion("tabs").show(a)},showGeneral:function(){var a=this.collection.get("general");return this.showFooter({model:a}),new g({container:this.layout.getRegion("settings"),model:a})},showCheckout:function(){var a=this.collection.get("checkout");return this.showFooter({model:a}),new h({container:this.layout.getRegion("settings"),model:a})},showHotkeys:function(){var a=this.collection.get("hotkeys");return this.showFooter({model:a}),new i({container:this.layout.getRegion("settings"),model:a})},showAccess:function(){var a=this.collection.get("access");return this.showFooter({model:a}),new j({container:this.layout.getRegion("settings"),model:a})},showTools:function(){return new k({container:this.layout.getRegion("settings")})},showFooter:function(a){o.defaults(a,{buttons:[{action:"save",className:"button-primary",icon:"append"},{type:"message"},{action:"restore",className:"button-secondary alignright",icon:"prepend"}]});var b=m.request("buttons","view",a);this.listenTo(b,{"action:save":function(b){a.model.save([],{buttons:b})},"action:restore":function(b){a.model.destroy({buttons:b})}}),this.layout.getRegion("footer").show(b)}});a.exports=p,d.attach("SettingsApp.Router",p)},function(a,b,c){a.exports=_},function(a,b,c){a.exports=jQuery},function(a,b,c){a.exports=Backbone.Radio},function(a,b,c){a.exports=Handlebars},function(a,b,c){a.exports=accounting},function(a,b,c){a.exports=moment},function(a,b,c){a.exports=Backbone},function(a,b,c){var d=c(70),e=c(21),f=c(2),g=c(19);a.exports=f.Service=d.Object.extend({constructor:function(a){a=a||{},this.channelName&&(this.channel=e.channel(g.result(this,"channelName"))),a.app&&(this.app=a.app),d.Object.apply(this,arguments)},start:function(){this.triggerMethod("before:start"),this._isStarted=!0,this.triggerMethod("start")},stop:function(){this.triggerMethod("before:stop"),this._isStarted=!1,this.triggerMethod("stop")},isStarted:function(){return this._isStarted===!0}})},function(a,b,c){var d=c(74),e=c(83);a.exports=d.extend({model:e,name:"products"})},function(a,b,c){var d=c(74),e=c(75),f=c(20),g=c(19),h=c(25);a.exports=d.extend({model:e,name:"orders",_syncDelayed:!1,setActiveOrder:function(a){var b=this.get(a);return b||"new"===a||(b=g.first(this.openOrders())),this.active=b,b},getActiveOrder:function(){var a=this,b=new f.Deferred;return this.active?b.resolve(this.active):this.create().then(function(c){c.cart.order_id=c.id,a.active=c,"cart/new"===h.history.getHash()&&h.history.navigate("cart/"+c.id),b.resolve(c)}),b.promise()},addToCart:function(a){this.getActiveOrder().then(function(b){b.cart.addToCart(a)})},create:function(){var a=new f.Deferred;return d.prototype.create.call(this,{local_id:Date.now()},{wait:!0,success:a.resolve,error:a.reject}),a.promise()},openOrders:function(){return this.filter(function(a){return a.isEditable()})}})},function(a,b,c){var d=c(76),e=c(77),f=c(19),g=c(25);a.exports=d.extend({model:e,name:"cart",indexes:[{name:"local_id",keyPath:"local_id",unique:!0},{name:"order",keyPath:"order",unique:!1},{name:"type",keyPath:"type",unique:!1}],productAttributes:["order","title","local_id","product_id","type","price","regular_price","sale_price","taxable","tax_status","tax_class","attributes","method_title","method_id"],comparator:function(a){var b=a.get("type");return"fee"===b?2:"shipping"===b?1:0},fetchCartItems:function(){if(this.order_id){var a=this.add.bind(this),b=this.db.store.makeKeyRange({only:this.order_id});this.db.store.query(a,{index:"order",keyRange:b})}},sum:function(a,b){var c=this.toJSON();return b&&(c=f.where(c,{type:b})),f.pluck(c,a).reduce(function(a,b){return a+b},0)},addToCart:function(a){a=a||{};var b,c=a.model||a;c instanceof g.Model&&(c=c.toJSON()),c.id&&(b=this.findWhere({product_id:c.id}),c.product_id=c.id,delete c.id),b?b.quantity("increase"):b=this._addToCart(c),b.trigger("pulse")},_addToCart:function(a){return a.order=this.order_id,this.add(f.pick(a,this.productAttributes))},itemizedTax:function(){var a=f.clone(this.toJSON(),!0),b=f.map(a,function(a){return a.tax?(f.each(a.tax,function(b){b.shipping="shipping"===a.type?b.total:0}),a.tax):void 0}),c=this.sumTaxes(b),d=[];return f.each(c,function(a,b){a.rate_id=b.toString(),d.push(a)}),d},sumTaxes:function(a){return f.reduce(a,function(a,b){return f.merge(a,b,function(a,b){return a&&(b.total+=a.total,b.subtotal+=a.subtotal,b.shipping+=a.shipping),b})},{})}})},function(a,b,c){var d=c(60),e=c(84),f=c(21);a.exports=d.extend({model:e,name:"customers",url:function(){var a=f.request("entities","get",{type:"option",name:"wc_api"});return a+"customers"},initialize:function(){var a=f.request("entities","get",{type:"option",name:"customers"});a&&(this._guest=a.guest,this._default=a["default"]||a.guest)}})},function(a,b,c){var d=c(60),e=c(85);a.exports=d.extend({model:e})},function(a,b,c){var d=c(78),e=c(21);a.exports=d.extend({initialize:function(){this.url=e.request("entities","get",{type:"option",name:"ajaxurl"})},sync:function(a,b,c){var f=e.request("entities","get",{type:"option",name:"nonce"}),g="id="+b.get("id"),h="action=wc_pos_admin_settings",i="security="+f;return c.url=this.url+"?"+h+"&"+g+"&"+i,c.buttons&&this.updateButtonState(c),d.prototype.sync(a,b,c)},parse:function(a){return a||(a=null),a},updateButtonState:function(a){var b=a.success,c=a.error,d=a.buttons;d.trigger("state",["loading",""]),a.success=function(a,c,e){b&&b(a,c,e),d.trigger("state",["success",null])},a.error=function(a,b,e){c&&c(a,b,e);var f=null;a.responseJSON&&a.responseJSON.errors&&(f=a.responseJSON.errors[0].message),d.trigger("state",["error",f])}},destroy:function(a){var b=this;return this.sync("delete",this,a).then(function(a){a.id=b.id,b.clear({silent:!0}).set(a)})}})},function(a,b,c){var d=c(60),e=c(32);a.exports=d.extend({model:e})},function(a,b,c){var d=c(60),e=c(79),f=c(20),g=[];f(".tmpl-checkout-gateways").each(function(){g.push({method_id:f(this).data("gateway"),method_title:f(this).data("title"),icon:f(this).data("icon"),active:1===f(this).data("default")})}),a.exports=d.extend({model:e,initialize:function(){this._isNew=!1,this.on("change:active",this.onChangeActive)},fetch:function(){this.add(g)},onChangeActive:function(a,b){b&&this.each(function(b){a.id!==b.id&&b.set({active:!1})})}})},function(a,b,c){var d=c(60),e=c(80),f=c(21);a.exports=d.extend({model:e,url:function(){var a=f.request("entities","get",{type:"option",name:"wc_api"});return a+"products"},initialize:function(){this._isNew=!1}})},function(a,b,c){function d(a,b){this._superset=a,this._filtered=new g(a,b),this._sorted=new h(this._filtered,b),this._paginated=new i(this._sorted,b),j(this._paginated,this),k.call(this,this._filtered,o),k.call(this,this._sorted,q),k.call(this,this._paginated,s),this.initialize(b)}var e=c(19),f=c(25),g=c(130),h=c(131),i=c(132),j=c(133),k=c(81),l=c(82);e.extend(g.prototype,l);var m={superset:function(){return this._superset},getFilteredLength:function(){return this._filtered.length},removeTransforms:function(){return this._filtered.resetFilters(),this._sorted.removeSort(),this._paginated.removePagination(),this},destroy:function(){this.stopListening(),this._filtered.destroy(),this._sorted.destroy(),this._paginated.destroy(),this.length=0,this.trigger("obscura:destroy")}},n=["filterBy","removeFilter","resetFilters","refilter","hasFilter","getFilters","query","getQuery","getTokens","getRemoteFilter"],o=["filtered:add","filtered:remove","filtered:reset"],p=["setSort","reverseSort","removeSort"],q=["sorted:add","sorted:remove"],r=["setPerPage","setPage","getPerPage","getNumPages","getPage","hasNextPage","hasPrevPage","nextPage","prevPage","movePage","removePagination","firstPage","lastPage","appendNextPage"],s=["paginated:change:perPage","paginated:change:page","paginated:change:numPages"],t=["add","create","remove","set","reset","sort","parse","sync","fetch","push","pop","shift","unshift"];e.each(n,function(a){m[a]=function(){var b=g.prototype[a].apply(this._filtered,arguments);return b===this._filtered?this:b}}),e.each(r,function(a){m[a]=function(){var b=i.prototype[a].apply(this._paginated,arguments);return b===this._paginated?this:b}}),e.each(p,function(a){m[a]=function(){var b=h.prototype[a].apply(this._sorted,arguments);return b===this._sorted?this:b}}),e.each(t,function(a){m[a]=function(){throw new Error("Backbone.Obscura: Unsupported method: "+a+"called on read-only proxy")}}),e.extend(d.prototype,m,f.Events),d=f.Collection.extend(d.prototype),d.FilteredCollection=g,d.SortedCollection=h,d.PaginatedCollection=i,a.exports=d},function(a,b,c){var d=c(23),e=c(2),f=c(19),g={};g.round=function(a,b){return f.isFinite(parseInt(b,10))||(b=d.settings.currency.precision),parseFloat(d.toFixed(a,b))},g.decimalPlaces=function(a){return(+a).toFixed(4).replace(/^-?\d*\.?|0+$/g,"").length},g.unformat=function(a){return d.unformat(a,d.settings.number.decimal)},g.formatNumber=function(a,b){return"auto"===b&&(b=g.decimalPlaces(a)),f.isFinite(parseInt(b,10))||(b=d.settings.currency.precision),d.formatNumber(a,b)},g.formatMoney=function(a,b){return"auto"===b&&(b=g.decimalPlaces(a)),f.isFinite(parseInt(b,10))||(b=d.settings.currency.precision),a=g.round(a,b),d.formatMoney(a)},g.isPositiveInteger=function(a,b){var c=~~Number(a);return b?String(c)===a&&c>=0:String(c)===a&&c>0},g.parseErrorResponse=function(a){var b=a.responseJSON;return b.errors?b.errors[0].message:a.responseText},g.toType=function(a){return{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},a.exports=e.Utils=g},function(a,b,c){var d=c(86),e=c(87),f=c(19),g=c(20),h=c(21),i=c(73)("modalLayout");c(157),c(158),a.exports=d.extend({template:function(){return'<div class="modal-dialog"><div class="modal-content"><div class="modal-header"></div><div class="modal-body"></div><div class="modal-footer"></div></div></div>'},className:"modal",attributes:{tabindex:-1,role:"dialog"},buttons:[{type:"message"},{action:"save",icon:"prepend",className:"btn-primary"}],regions:{header:".modal-header",content:".modal-body",footer:".modal-footer"},initialize:function(){this.$el.modal({show:!1,backdrop:"static"})},events:{'click [data-action="close"]':function(a){a.preventDefault(),h.request("modal","close")}},triggers:{"show.bs.modal":{preventDefault:!1,event:"before:open"},"shown.bs.modal":{preventDefault:!1,event:"open"},"hide.bs.modal":{preventDefault:!1,event:"before:close"},"hidden.bs.modal":{preventDefault:!1,event:"close"}},open:function(a){var b=g.Deferred();return this.once("open",b.resolve),this.setup(a),this.content.show(a),this.$el.modal("show"),b},close:function(){var a=g.Deferred();return this.once("close",function(){this.tearDown(),a.resolve()}),this.$el.modal("hide"),a},setup:function(a){var b=a.modal||{};f.defaults(b,{header:{},footer:{}}),f.each(b,function(a,b){var c=g.camelCase("modal-"+b);this[c]?this[c](a):i("no method matching "+c)},this)},tearDown:function(){this.header.empty(),this.content.empty(),this.footer.empty(),this.$(".modal-dialog").removeClass().addClass("modal-dialog")},update:function(a){a=a||{},f.each(a,function(a,b){this[b].currentView.triggerMethod("Update",a)},this)},modalHeader:function(a){var b=new e(a);this.header.show(b)},modalFooter:function(a){a.buttons=a.buttons||this.buttons;var b=h.request("buttons","view",a);this.footer.show(b)},modalTitle:function(a){this.$(".modal-header h1").html(a)},modalClassName:function(a){a&&this.$(".modal-dialog").addClass(a)},getButtons:function(){return this.getRegion("footer").currentView}})},function(a,b,c){var d=c(88),e=c(22),f=c(138);a.exports=d.extend({template:e.compile(f),initialize:function(a){a=a||{},this.message=a.message,this.raw=a.raw,this.modal={className:a.className,header:{title:a.title},footer:{buttons:[{action:"close"}]}}},templateHelpers:function(){var a={};return a.message=this.message,a.raw=this.raw,a},ui:{raw:'*[data-action="raw"]',output:".raw-output"},events:{"click @ui.raw":"toggleRaw"},toggleRaw:function(a){a.preventDefault(),this.ui.output.toggle()}})},,function(a,b,c){var d=c(70),e=c(2),f=c(21),g=c(19);a.exports=e.Application=d.Application.extend({_initChannel:function(){this.channelName=g.result(this,"channelName")||"global",this.channel=g.result(this,"channel")||f.channel(this.channelName)}})},,function(a,b,c){var d=c(134),e=c(2),f=new d;a.exports=e.polyglot=f},,function(a,b,c){var d=c(95),e=c(96),f=d.extend({tagName:"ul",childView:e,attributes:{role:"tablist"},setActive:function(a){var b=this.collection.get(a);b.set({active:!0})},setLabel:function(a){a=a||{};var b=this.collection.get(a.tab);b.set({label:a.label})},onShow:function(){this.collection.ensureActiveTab()}});a.exports=f},function(a,b,c){var d=c(60),e=c(94),f=d.extend({model:e,initialize:function(){this.on({"change:active":this.onChangeActive,remove:this.ensureActiveTab})},onChangeActive:function(a,b){b&&(this.each(function(b){b.set({active:b===a})}),this.trigger("active:tab",a))},ensureActiveTab:function(){var a=this.where({active:!0});0===a.length&&this.at(0).set({active:!0})}});a.exports=f},function(a,b,c){var d=c(88),e=c(22),f=c(19),g=c(139),h=c(43),i=c(89);a.exports=d.extend({viewOptions:["buttons"],buttons:[{action:"save",className:"btn-primary"}],template:e.compile(g),initialize:function(a){this.mergeOptions(a,this.viewOptions)},templateHelpers:function(){return f.each(this.buttons,function(a){var b=a.type||"button";a[b]=!0,a.label=a.label||h.t("buttons."+a.action)}),{buttons:this.buttons}},behaviors:{Buttons:{behaviorClass:i}}})},,,,function(a,b,c){var d=c(25),e=c(70),f=c(20),g=c(19),h=c(100),i=c(2);a.exports=i.Router=e.AppRouter.extend({constructor:function(){this.channel=d.Radio.channel("router"),this.on("all",this._onRouterEvent),this.listenTo(d.history,"route",this._onHistoryRoute),e.AppRouter.apply(this,arguments)},_onRouterEvent:function(a){var b=g.toArray(arguments).slice(1);this.channel.trigger.apply(this.channel,[a,this].concat(b))},_onHistoryRoute:function(a){this===a?this.active=!0:(this.active=!1,this._currentRoute=void 0)},execute:function(a,b){var c=this;this.active||this.triggerMethod.apply(this,["before:enter"].concat(b)),this.triggerMethod.apply(this,["before:route"].concat(b)),f.when(this._execute(a,b)).then(function(){c.active||c.triggerMethod.apply(c,["enter"].concat(b)),c.triggerMethod.apply(c,["route"].concat(b))})},_execute:function(a,b){var c=a.apply(this,b);return this._currentRoute=c,c instanceof h?(c.router=this,c.enter(b)):void 0},triggerMethod:e.triggerMethod})},,,,,,,,,function(a,b,c){var d=c(25),e=c(2);a.exports=e.Collection=d.Collection.extend({constructor:function(){d.Collection.apply(this,arguments),this._isNew=!0,this.once("sync",function(){this._isNew=!1})},isNew:function(){return this._isNew},parse:function(a){return a&&a[this.name]?a[this.name]:a},sync:function(){return d.sync.apply(this,arguments)}})},,,function(a,b,c){var d=c(86);a.exports=d.extend({el:"#wpbody-content .wrap",template:function(){return'<div id="wc-pos-admin"></div><div id="wc-pos-modal"></div>'},regions:{main:"#wc-pos-admin",modal:"#wc-pos-modal"}})},function(a,b,c){var d=c(86),e=c(2),f=d.extend({template:function(){return'<div id="wc-pos-settings-tabs"></div><div id="wc-pos-settings"></div><div id="wc-pos-settings-footer"></div>'},regions:{tabs:"#wc-pos-settings-tabs",settings:"#wc-pos-settings",footer:"#wc-pos-settings-footer"}});a.exports=f,e.attach("SettingsApp.LayoutView",f)},function(a,b,c){var d=c(100),e=c(2),f=c(123),g=d.extend({initialize:function(a){a=a||{},this.container=a.container,this.model=a.model},fetch:function(){return this.model.isNew()?this.model.fetch():void 0},render:function(){var a=new f({model:this.model});this.container.show(a)}});a.exports=g,e.attach("SettingsApp.General.Route",g)},function(a,b,c){var d=c(100),e=c(2),f=c(124),g=c(125),h=c(21),i=d.extend({initialize:function(a){a=a||{},this.container=a.container,this.model=a.model},fetch:function(){return this.model.isNew()?this.model.fetch():void 0},render:function(){var a=new f({model:this.model});this.listenTo(a,"open:modal",this.openModal),this.container.show(a)},openModal:function(a,b){var c=this.model.collection.add({id:"gateway_"+a});c.get("title")||this.initModalData(c,b);var d=new g({tmpl:b.modalTmpl,model:c}),e=this;h.request("modal","open",d).then(function(a){var b=a.view.getButtons();e.listenTo(b,"action:save",function(a){c.save([],{buttons:a})})})},initModalData:function(a,b){function c(b){return"#"+a.id+" .gateway-"+b}var d={title:b.$(c("name")).html(),description:b.$(c("description")).html(),icon:b.$(c("icon")).data("show")?!0:!1};d.hasIcon=b.$(c("icon")).data("icon"),a.set(d)}});a.exports=i,e.attach("SettingsApp.Route",i)},function(a,b,c){var d=c(100),e=c(2),f=c(126),g=d.extend({initialize:function(a){a=a||{},this.container=a.container,this.model=a.model},render:function(){var a=new f({model:this.model});this.container.show(a)}});a.exports=g,e.attach("SettingsApp.HotKeys.Route",g)},function(a,b,c){var d=c(100),e=c(2),f=c(127),g=d.extend({initialize:function(a){a=a||{},this.container=a.container,this.model=a.model},fetch:function(){return this.model.isNew()?this.model.fetch():void 0},render:function(){var a=new f({model:this.model});this.container.show(a)}});a.exports=g,e.attach("SettingsApp.Access.Route",g)},function(a,b,c){var d=c(100),e=c(2),f=c(128),g=c(129),h=c(21),i=d.extend({initialize:function(a){a=a||{},this.container=a.container},render:function(){var a=new f;this.listenTo(a,{"translation:update":this.openTranslationModal}),this.container.show(a)},openTranslationModal:function(a){var b=a.view.$('[data-action="translation"]').data("title"),c=new g({title:b});h.request("modal","open",c)}});a.exports=i,e.attach("SettingsApp.Tools.Route",i)},function(a,b,c){a.exports=Marionette},,function(a,b,c){var d=c(136),e=c(137),f=e(d);a.exports=f},function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,c=this.useColors;if(a[0]=(c?"%c":"")+this.namespace+(c?" %c":" ")+a[0]+(c?"%c ":" ")+"+"+b.humanize(this.diff),!c)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?j.removeItem("debug"):j.debug=a}catch(b){}}function h(){var a;try{a=j.debug}catch(b){}return a}function i(){try{return window.localStorage}catch(a){}}b=a.exports=c(141),b.log=f,b.formatArgs=e,b.save=g,b.load=h,b.useColors=d;var j;j="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i(),b.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],b.formatters.j=function(a){return JSON.stringify(a)},b.enable(h())},function(a,b,c){var d=c(25),e=d.Radio,f=c(73)("dualCollection"),g=c(76),h=c(2),i=c(19),j=c(20),k=c(24);a.exports=h.DualCollection=g.extend({keyPath:"local_id",mergeKeyPath:"id",_syncDelayed:!0,queue:[],delay:500,url:function(){var a=e.request("entities","get",{type:"option",name:"wc_api"});return a+this.name},state:{pageSize:10},fetch:function(a){return a=a||{},a.remote?this.remoteFetch(a):g.prototype.fetch.call(this,a)},remoteFetch:function(a){var b=this;return this.sync("read",this,a).then(function(a){var c=b.parse(a);return g.prototype.merge.call(b,c)}).then(function(a){var c=i.map(a,function(a){return a.get("id")});b.dequeue(c)})},fullSync:function(){var a=this;return this._syncing?void f("sync already in progress"):(this._syncing=!0,f("fullSync started"),this.trigger("start:fullSync"),this.fetchUpdated().then(function(){return a.auditRecords()}).then(function(){return a._syncDelayed?a.syncDelayed():void 0}).done(function(){f("fullSync complete")}).fail(function(a){f("fullSync failed",a)}).always(function(){a._syncing=!1,a.trigger("end:fullSync")}))},fetchUpdated:function(){var a=this;if(0===this.length)return this.fetch({remote:!0});var b=i.compact(this.pluck("updated_at")).sort().pop();return this.getRemoteIds(b).then(function(b){return a.enqueue(b),a.processQueue({queue:b,all:!0})})},syncDelayed:function(){var a=this.getDelayedModels(),b=i.map(a,function(a){return a.remoteSync(null,a)});return j.when.apply(this,b)},getDelayedModels:function(){return this.filter(function(a){return a.isDelayed()})},auditRecords:function(){var a=this.pluck("id"),b=this;return this.getRemoteIds().then(function(c){var d=i.chain(c).difference(a).compact().value(),e=i.chain(a).difference(c).compact().value();return b.enqueue(d),b.dequeue(e),b.removeGarbage(e)}).done(function(){f("audit complete")}).fail(function(a){f("audit failed",a)})},getRemoteIds:function(a){var b=e.request("entities","get",{type:"option",name:"ajaxurl"});return f(a?"getting updated ids from server since "+a:"getting all ids from server"),j.getJSON(b,{action:"wc_pos_get_all_ids",type:this.name,updated_at_min:a})},removeGarbage:function(a){var b=this.getModelsByRemoteIds(a);if(0!==b.length)return this.remove(b),this.db.removeBatch(i.pluck(b,"id"))},getModelsByRemoteIds:function(a){return this.filter(function(b){return i(a).contains(b.get("id"))})},enqueue:function(a){return i.isArray(a)?void(this.queue=i.union(this.queue,a)):this.queue.push(a)},dequeue:function(a){i.isArray(a)?this.queue=i.difference(this.queue,a):this.queue=i.without(this.queue,a)},hasAllRecords:function(){return 0===this.queue.length},processQueue:function(a){a=a||{};var b=a.queue||i.clone(this.queue);if(0!==b.length&&!this._processingQueue){this._processingQueue=!0,this.trigger("start:processQueue");var c=this,d=new j.Deferred,e=b.splice(0,this.state.pageSize).join(",");return this.fetch({remote:!0,data:{filter:a.filter||{limit:-1,"in":e}}}).done(function(){a.all&&0!==b.length?(d.progress(e),i.delay(c.processQueue.bind(c),c.getDelay(),a)):d.resolve()}).fail(d.reject).always(function(){c._processingQueue=!1,c.trigger("end:processQueue")}),d.promise()}},getDelay:function(){return e.request("entities","get",{type:"option",name:"delay"})||this.delay},formatDate:function(a){return a?k(a).toISOString():void 0}})},function(a,b,c){var d=c(142),e=c(21),f=c(37),g=c(73)("order"),h=c(2),i=c(20),j=d.extend({name:"order",fields:["customer.first_name","customer.last_name","customer.email"],defaults:function(){var a=this.getEntities("customers"),b=a["default"]||a.guest||{};return{note:"",order_discount:0,customer_id:b.id,customer:b}},initialize:function(){this.tax=this.getEntities("tax"),this.tax_rates=this.getEntities("tax_rates"),this.isEditable()&&(this.attachCart(),this.attachGateways()),this.on({"change:order_discount":this.calcTotals,"change:status":this.isEditable})},getEntities:function(a){return e.request("entities","get",{type:"option",name:a})||{}},isEditable:function(){return void 0===this.get("status")||this.isDelayed()},attachCart:function(){var a=e.request("entities","get",{init:!0,type:"collection",name:"cart"});a.order_id=this.id,this.listenTo(a,{"add change":this.calcTotals,remove:this.itemRemoved}),a.db&&a.db.open().then(function(){a.fetchCartItems()}),this.cart=a},clearCart:function(){this.cart&&this.cart.db.removeBatch(this.cart.pluck("local_id"))},attachGateways:function(){this.gateways=e.request("entities","get",{init:!0,type:"collection",name:"gateways"}),this.gateways.fetch()},itemRemoved:function(){return this.cart.length>0?this.calcTotals():this.destroy()},calcTotals:function(){var a=0,b=0,c=0,d=0,e=this.cart.sum("subtotal"),h=this.cart.sum("total"),i=e-h,j=this.get("order_discount");"yes"===this.tax.calc_taxes&&(a=this.cart.sum("total_tax"),b=this.cart.sum("subtotal_tax"),c=this.cart.sum("total_tax","shipping"),d=b-a),h+=a,h-=j,this.unset("tax_lines",{silent:!0});var k={total:f.round(h,4),subtotal:f.round(e,4),total_tax:f.round(a,4),subtotal_tax:f.round(b,4),shipping_tax:f.round(c,4),cart_discount:f.round(i,4),cart_discount_tax:f.round(d,4),tax_lines:this.cart.itemizedTax()};this.save(k),g("update totals",k)},sum:function(a){for(var b=0,c=0;c<a.length;c++)b+=parseFloat(this.get(a[c]));return b},process:function(){var a=this;return i.when(this.processCart()).then(function(){return a.processGateway()}).then(function(){return a.remoteSync()}).then(function(a){var b=a[0];"failed"===b.get("status")&&b.save({status:"UPDATE_FAILED"})})},processCart:function(){var a={product:[],shipping:[],fee:[]};this.cart.each(function(b){var c=b.get("type");"shipping"!==c&&"fee"!==c&&(c="product"),a[c].push(b.toJSON())}),this.set({line_items:a.product,shipping_lines:a.shipping,fee_lines:a.fee,
tax_lines:this.cart.itemizedTax()})},processGateway:function(){var a=this.gateways.findWhere({active:!0}).toJSON();this.set({payment_details:a})}});a.exports=j,h.attach("Entities.Order.Model",j)},function(a,b,c){var d=c(60),e=c(2),f=c(145),g=c(21);a.exports=e.IndexedDBCollection=d.extend({name:"store",storePrefix:"wc_pos_",dbVersion:1,keyPath:"local_id",autoIncrement:!0,indexes:[{name:"local_id",keyPath:"local_id",unique:!0},{name:"id",keyPath:"id",unique:!0},{name:"status",keyPath:"status",unique:!1}],constructor:function(){d.apply(this,arguments);var a={storeName:this.name,storePrefix:this.storePrefix,dbVersion:this.dbVersion,keyPath:this.keyPath,autoIncrement:this.autoIncrement,indexes:this.indexes,defaultErrorHandler:function(a){g.trigger("global","error",{status:a.target.error.name,message:a.target.error.message})}};this.db=new f(a,this),this.db.open()},merge:function(a){var b=this;return this.db.merge(a).then(function(){var a=Array.prototype.slice.apply(arguments);return b.add(a,{merge:!0})})}})},function(a,b,c){var d=c(143),e=c(73)("cartItem"),f=c(37),g=c(19),h=c(21);a.exports=d.extend({idAttribute:"local_id",defaults:{subtotal:0,subtotal_tax:0,total_tax:0,total:0,item_tax:0,quantity:1,taxable:!0,tax_class:""},initialize:function(){this.tax=h.request("entities","get",{type:"option",name:"tax"})||{},this.tax_rates=h.request("entities","get",{type:"option",name:"tax_rates"})||{},this.on("change:quantity change:item_price change:regular_price change:taxable change:tax_class",this.updateLineTotals),void 0===this.get("item_price")&&this.set({item_price:parseFloat(this.get("price"))})},updateLineTotals:function(){var a,b,c,d=this.get("quantity"),h=this.get("item_price"),i=this.get("type"),j=parseFloat(this.get("regular_price")),k=this.get("tax_class");this.tax_rates[k]&&(c=g.cloneDeep(this.tax_rates[k])),("shipping"===i||"fee"===i)&&(j=h),a=this.calcTax({price:h,quantity:d,rates:c}),b=this.calcTax({price:j,quantity:d,rates:c,subtotal:!0}),"yes"===this.tax.prices_include_tax&&(j-=b,h-=a);var l={item_subtotal:f.round(j,4),item_subtotal_tax:f.round(b,4),item_tax:f.round(a,4),subtotal:f.round(j*d,4),subtotal_tax:f.round(b*d,4),total_tax:f.round(a*d,4),total:f.round(h*d,4)};this.save(l),e("update totals",l)},calcTax:function(a){var b=0;return"yes"===this.tax.calc_taxes&&this.get("taxable")&&a.rates?b="yes"===this.tax.prices_include_tax?this.calcInclusiveTax(a):this.calcExclusiveTax(a):this.set("tax",void 0),b},calcInclusiveTax:function(a){var b=0,c=0,d=0,e=0,h=0,i=a.price,j=a.rates,k=a.quantity;g.each(j,function(a,d){return"shipping"===this.get("type")&&"no"===a.shipping?void delete j[d]:void("yes"===a.compound?c+=parseFloat(a.rate):b+=parseFloat(a.rate))},this);var l=1+b/100,m=1+c/100;return d=i/m,g.each(j,function(b){var c=parseFloat(b.rate)/100,g=0;"yes"===b.compound?(g=i,c/=m):(g=d,c/=l);var j=i-c*g;e=i-j;var n=a.subtotal?"subtotal":"total";b[n]=f.round(e*k,4),h+=e},this),g.isEmpty(j)||this.set("tax",j),h},calcExclusiveTax:function(a){var b=[],c=0,d=0,e=0,h=a.price,i=a.rates,j=a.quantity;return g.each(i,function(a,c){return d=0,"shipping"===this.get("type")&&"no"===a.shipping?void delete i[c]:("yes"!==a.compound&&(d=h*(parseFloat(a.rate)/100)),void(b[c]=d))},this),b.length>0&&(c=b.reduce(function(a,b){return a+b})),g.each(i,function(d,g){if("yes"===d.compound){var i=h+c;b[g]=i*(parseFloat(d.rate)/100)}var k=a.subtotal?"subtotal":"total";d[k]=f.round(b[g]*j,4),e+=b[g]},this),g.isEmpty(i)||this.set("tax",i),e},quantity:function(a){var b=this.get("quantity");return this.set("quantity","increase"===a?++b:--b),this},sum:function(a){for(var b=0,c=0;c<a.length;c++)b+=this.get(a[c]);return f.round(b,4)}})},function(a,b,c){var d=c(2),e=c(143),f=c(144);a.exports=d.DeepModel=e.extend(f)},function(a,b,c){var d=c(143);a.exports=d.extend({idAttribute:"method_id",defaults:{active:!1}})},function(a,b,c){var d=c(143),e=c(19);a.exports=d.extend({name:"product",defaults:{type:"variation"},initialize:function(a,b){b=b||{},this.parent=b.parent,this.set({title:b.parent.get("title")})},save:function(a,b){var c=this;return d.prototype.save.call(this,a,b).then(function(){c.parent.set({variations:c.collection.toJSON()}),c.parent.merge()})},parse:function(a){return a=a.product||a,e.each(["price","regular_price","sale_price"],function(b){e.isString(a[b])&&(a[b]=parseFloat(a[b]))}),a}})},function(a,b,c){function d(a,b){e.each(b,function(b){this.listenTo(a,b,function(){var a=e.toArray(arguments);a.unshift(b),this.trigger.apply(this,a)})},this)}var e=c(19);a.exports=d},function(a,b,c){var d=c(19),e=c(135);a.exports={query:function(a,b){return d.isUndefined(b)&&(b=a,a="search"),this._query=b,""===b?this.removeFilter(a):this.filterBy(a,d.bind(e,this,b))},getQuery:function(){return this._query},getTokens:function(){return this._tokens},getRemoteFilter:function(){if(this._tokens){var a={not_in:this.pluck("id").join(",")};return d.each(this._tokens,function(b){"string"===b.type&&(a.q=b.query),"prefix"===b.type&&(a[b.prefix]=b.query)}),a}}}},function(a,b,c){var d=c(142),e=c(19),f=c(21);a.exports=d.extend({name:"product",fields:["title"],parse:function(a){return a=a.product||a,e.each(["price","regular_price","sale_price"],function(b){e.isString(a[b])&&(a[b]=parseFloat(a[b]))}),a},min:function(a){var b=this.get("variations");"sale_price"===a&&(b=e.where(b,{on_sale:!0}));var c=e.pluck(b,a);return c.length>0?e(c).compact().min():this.get(a)},max:function(a){var b=e.pluck(this.get("variations"),a);return b.length>0?e(b).compact().max():this.get(a)},range:function(a){if("sale_price"===a){var b=e.min([this.min("sale_price"),this.min("price")]),c=e.max([this.max("sale_price"),this.max("price")]);return e.uniq([b,c])}return e.uniq([this.min(a),this.max(a)])},productAttributes:function(){return e.chain(this.get("attributes")).where({variation:!1}).where({visible:!0}).value()},productVariations:function(){return e.where(this.get("attributes"),{variation:!0})},matchMaker:function(a,b,c){var d=e.all(a,function(a){return"prefix"===a.type&&"barcode"===a.prefix&&a.query?this.barcodeMatch(a.query):"prefix"===a.type&&"cat"===a.prefix?(a.prefix="categories",b.prefix(a,this)):void 0},this);return d?d:c(a,this)},barcodeMatch:function(a){var b=this.get("type"),c=this.get("barcode").toLowerCase(),d=a.toString().toLowerCase();return c===d?("variable"!==b&&this.trigger("match:barcode",this),!0):"variable"!==b?this.partialBarcodeMatch(c,d):this.variableBarcodeMatch(c,d)},partialBarcodeMatch:function(a,b){return-1!==a.indexOf(b)?!0:!1},variableBarcodeMatch:function(a,b){var c,d=f.request("entities","get",{type:"variations",parent:this});return d.superset().each(function(a){var d=a.get("barcode").toLowerCase();return d===b?void(c=a):-1!==d.indexOf(b)?void(c="partial"):void 0}),c?("partial"!==c&&this.trigger("match:barcode",c,this),!0):this.partialBarcodeMatch(a,b)}})},function(a,b,c){var d=c(143);a.exports=d.extend({name:"customer"})},function(a,b,c){var d=c(143);a.exports=d.extend({})},function(a,b,c){var d=c(70),e=c(2);a.exports=e.LayoutView=d.LayoutView.extend({working:function(a){"start"===a?this.$el.addClass("working"):this.$el.removeClass("working")}})},function(a,b,c){var d=c(88),e=c(22),f=c(19),g=c(43);a.exports=d.extend({template:e.compile('<h1>{{{title}}}</h1><i class="icon icon-times" data-action="close" title="{{close}}"></i>'),initialize:function(a){a=a||{};var b={title:g.t("messages.loading"),close:g.t("buttons.close")};this.data=f.defaults(a,b)},templateHelpers:function(){return this.data},onUpdate:function(a){f.extend(this.data,a),this.render()}})},function(a,b,c){var d=c(70),e=c(2);a.exports=e.ItemView=d.ItemView},function(a,b,c){var d=c(146),e=c(2),f=c(20),g=c(43),h="disabled",i=d.extend({loadingText:g.t("messages.loading"),ui:{btns:".btn",action:"[data-action]",toggle:"[data-toggle]",message:".message"},events:{"click @ui.action":"action","click @ui.toggle":"toggle","state @ui.btns":"setState"},action:function(a){a.preventDefault();var b=f(a.target).data("action");this.view.trigger("action:"+b,f(a.target),this.view,b)},toggle:function(a){a.preventDefault(),this.enable().disable(f(a.target));var b=f(a.target).data("toggle");this.view.trigger("toggle:"+b,f(a.target),this.view,b)},enable:function(a){return a?a.removeClass(h).prop(h,!1):this.ui.btns.each(function(){f(this).removeClass(h).prop(h,!1)}),this},disable:function(a){return a?a.addClass(h).prop(h,!0):this.ui.btns.each(function(){f(this).addClass(h).prop(h,!0)}),this},setState:function(a,b,c){var d=f(a.target),e="loading"===b?"disable":"enable";this[e](),this.updateText(d),d.is("input")?this.updateInput(d,b):this.updateIcon(d,b),void 0!==c&&this.updateMessage(c,b)},updateText:function(a){if(void 0!==a.data("loading")){var b=a.is("input")?"val":"html",c=a[b](),d=a.data("loading")||this.loadingText;a.data("loading",c),a[b](d)}},updateIcon:function(a,b){if(void 0!==a.data("icon")){var c=a.data("icon")||"prepend",d="reset"!==b?'<i class="icon-'+b+'"></i>':"";a.children("i").remove(),a[c](d)}},updateInput:function(a,b){a.removeClass("loading success error"),"reset"!==b&&a.addClass(b)},updateMessage:function(a,b){null===a&&(a=g.t("messages."+b)),b||(b=a,a=g.t("messages."+a)),"reset"===b&&(a=""),this.ui.message.removeClass("loading success error").addClass(b).html(a)},onMessage:function(a,b){this.updateMessage(a,b)},onDisableButtons:function(){this.disable()},onEnableButtons:function(){this.enable()}});a.exports=i,e.attach("Behaviors.Buttons",i)},function(a,b,c){var d=c(88),e=c(25),f=c(2);c(186),c(185),c(147),a.exports=f.FormView=d.extend({constructor:function(){return d.prototype.constructor.apply(this,arguments)},bindings:{},render:function(){var a=Array.prototype.slice.apply(arguments),b=d.prototype.render.apply(this,a);return e.Validation.bind(this,{model:this.model,valid:function(a,b){a.$('input[name="'+b+'"]').parent().removeClass("error")},invalid:function(a,b){a.$('input[name="'+b+'"]').parent().addClass("error")}}),this.stickit(),b},remove:function(){return e.Validation.unbind(this),d.prototype.remove.apply(this,arguments)}})},,,,function(a,b,c){var d=c(143),e=d.extend({defaults:{id:"",label:"Tab",active:!1,fixed:!0}});a.exports=e},function(a,b,c){var d=c(70),e=c(2);a.exports=e.CollectionView=d.CollectionView.extend({})},function(a,b,c){var d=c(22),e=c(88),f=c(162),g=e.extend({tagName:"li",template:d.compile(f),className:function(){return this.model.get("active")?"active":void 0},modelEvents:{"change:active":"toggleActive","change:label":"render"},toggleActive:function(){this.$el.toggleClass("active",this.model.get("active"))},triggers:{click:"tab:clicked",'click *[data-action="remove"]':"remove:tab"},onTabClicked:function(){this.model.set({active:!0})},onRemoveTab:function(){this.model.collection.remove(this.model)}});a.exports=g},,,,function(a,b,c){var d=c(25),e=c(70),f=c(20),g=c(19),h=c(2),i=c(148),j=c(21),k=j.channel("global");a.exports=h.Route=e.Object.extend({constructor:function(){this.initialize.apply(this,arguments)},_triggerMethod:function(a,b){this.router&&this.router.triggerMethod.apply(this.router,[a+":route"].concat(b)),this.triggerMethod.apply(this,[a].concat(b))},enter:function(a){var b=this;return this.transitioning=!0,this._triggerMethod("before:enter",a),this._triggerMethod("before:fetch",a),g.defer(function(){b.transitioning&&(b.loading=new i({container:b.container}))}),f.when(this.fetch.call(this,a)).then(function(){b._triggerMethod("fetch",a),b._triggerMethod("before:render",a)}).then(function(){return b.transitioning=!1,b.render.apply(b,a)}).then(function(){b._triggerMethod("render",a),b._triggerMethod("enter",a)}).fail(function(){b._triggerMethod("error",a)})},navigate:function(){d.history.navigate.apply(d.history,arguments)},fetch:function(){},render:function(){},setTabLabel:function(a){k.trigger("tab:label",a)}})},,,,,function(a,b,c){var d=c(88),e=c(150),f=c(19),g=c(21),h=c(22),i=c(2),j=d.extend({template:function(){return'<input name="customer" type="hidden" class="select2">'},initialize:function(a){a=a||{},this.model=a.model,this.customers=g.request("entities","get",{type:"collection",name:"customers"})},behaviors:{Select2:{behaviorClass:e,minimumInputLength:3}},ui:{select:'input[name="customer"]'},events:{"change @ui.select":"onSelect","select2-opening @ui.select":"onSelectOpen"},query:f.debounce(function(a){var b=function(b){var c=b.toJSON();c.unshift(b._guest),a.callback({results:c})};this.customers.fetch({beforeSend:function(a){a.setRequestHeader("X-WC-POS",1)},data:"filter[q]="+a.term,success:b})},250),initSelection:function(a,b){var c;this.model&&(c=this.model.get("customer")),c||(c=this.customers._default),b(c)},formatResult:function(a){var b="{{first_name}} {{last_name}} {{#if email}}({{email}}){{/if}}";this.hasNoNames(a)&&(b="{{username}} ({{email}})");var c=h.compile(b);return c(a)},formatSelection:function(a){var b="{{first_name}} {{last_name}}";this.hasNoNames(a)&&(b="{{username}}");var c=h.compile(b);return c(a)},hasNoNames:function(a){return f.chain(a).pick("first_name","last_name").values().compact().isEmpty().value()},onSelect:function(a){this.trigger("customer:select",a.added)},onSelectOpen:function(){}});a.exports=j,i.attach("Components.CustomerSelect.View",j)},,,,,,,,,,,,,,,,,,function(a,b,c){var d=c(90),e=c(20),f=c(2),g=c(150),h=c(149),i=c(105),j=d.extend({template:function(){return e('script[data-id="general"]').html()},attributes:{id:"wc-pos-settings-general"},behaviors:{Select2:{behaviorClass:g,maximumSelectionSize:4},Tooltip:{behaviorClass:h}},modelEvents:{"change:id":"render"},onRender:function(){var a=this;this.$("input, select, textarea").each(function(){var b=e(this).attr("name");b&&a.addBinding(null,'*[name="'+b+'"]',b)}),this.customerSelect()},customerSelect:function(){var a=new i({el:this.$('*[data-component="customer-select"]'),model:this.model});a.render(),this.listenTo(a,"customer:select",function(a){this.model.set({default_customer:a.id,customer:a})}),this.model.get("logged_in_user")&&a.triggerMethod("select:disable",!0),this.model.on("change:logged_in_user",function(b,c){a.triggerMethod("select:disable",c)}),this.on("destroy",function(){a.destroy()})}});a.exports=j,f.attach("SettingsApp.General.View")},function(a,b,c){var d=c(90),e=c(20),f=c(2),g=c(149),h=c(167),i=d.extend({template:function(){return e('script[data-id="checkout"]').html()},attributes:{id:"wc-pos-settings-checkout"},modelEvents:{"change:id":"render"},onRender:function(){var a=this;this.$("input, select, textarea").each(function(){var b=e(this).attr("name");b&&a.addBinding(null,'*[name="'+b+'"]',b)}),this.modalTmpl=this.$("#tmpl-gateway-settings-modal").html()},ui:{settings:".gateway-settings"},events:{"click @ui.settings":"openGatewaySettingsModal"},behaviors:{Tooltip:{behaviorClass:g},Sortable:{behaviorClass:h}},openGatewaySettingsModal:function(a){a.preventDefault();var b=e(a.target).data("gateway");this.trigger("open:modal",b,this)}});a.exports=i,f.attach("SettingsApp.View")},function(a,b,c){var d=c(90),e=c(20),f=c(149),g=c(21);a.exports=d.extend({tagName:"table",className:"form-table",initialize:function(a){a=a||{},this.template=a.tmpl.trim(),this.modal={header:{title:this.model.get("title")},footer:{buttons:[{type:"message"},{action:"save",className:"button-primary",icon:"prepend"}]}}},behaviors:{Tooltip:{behaviorClass:f}},modelEvents:{"change:title":function(a,b){var c={};c.header={title:b},g.command("modal","update",c)}},onRender:function(){var a=this;this.$("input, select, textarea").each(function(){var b=e(this).attr("name");b&&a.addBinding(null,'*[name="'+b+'"]',b)}),this.model.get("hasIcon")&&this.$("#icon").closest("tr").show()}})},function(a,b,c){var d=c(90),e=c(20),f=c(2),g=c(149),h=d.extend({template:function(){return e('script[data-id="hotkeys"]').html()},attributes:{id:"wc-pos-settings-hotkeys"},behaviors:{Tooltip:{behaviorClass:g}},modelEvents:{"change:id":"render"},onRender:function(){var a=this;this.$("input, select, textarea").each(function(){var b=e(this).attr("name");b&&a.addBinding(null,'*[name="'+b+'"]',b)})}});a.exports=h,f.attach("SettingsApp.HotKeys.View")},function(a,b,c){var d=c(90),e=c(2),f=c(20),g=d.extend({template:function(){return f('script[data-id="access"]').html()},attributes:{id:"wc-pos-settings-access"},ui:{tabs:".wc-pos-access-tabs > li",options:".wc-pos-access-panel > li"},events:{"click @ui.tabs":"onTabClick"},modelEvents:{"change:id":"render"},onRender:function(){var a=this;this.$("input, select, textarea").each(function(){var b=f(this).attr("name");b&&a.addBinding(null,'*[name="'+b+'"]',b)}),this.ui.tabs.first().addClass("active"),this.ui.options.first().addClass("active")},onTabClick:function(a){this.ui.tabs.each(function(){f(this).removeClass("active")}),this.ui.options.each(function(){f(this).removeClass("active")}),f(a.currentTarget).addClass("active");var b=f(a.currentTarget).data("id");f("#"+b).addClass("active")}});a.exports=g,e.attach("SettingsApp.Access.View")},function(a,b,c){var d=c(88),e=c(2),f=c(20),g=d.extend({template:function(){return f('script[data-id="tools"]').html()},attributes:{id:"wc-pos-settings-tools"},ui:{translation:'*[data-action="translation"]'},triggers:{"click @ui.translation":"translation:update"}});a.exports=g,e.attach("SettingsApp.Tools.View")},function(a,b,c){(function(b){var d=c(88),e=c(21),f=b.EventSource;a.exports=d.extend({template:function(){return'<i class="spinner"></i>'},initialize:function(a){a=a||{},this.modal={header:{title:a.title},footer:{show:!1,buttons:[{action:"close",className:"button"}]}}},onShow:function(){var a=this,b=this.constructURL(),c=new f(b);c.onmessage=function(b){"complete"===b.data?(this.close(),a.$(".spinner").hide(),e.command("modal","update",{footer:{show:!0}})):a.$(".spinner").before("<p>"+b.data+"</p>")}},constructURL:function(){var a=e.request("entities","get",{type:"option",name:"ajaxurl"}),b=e.request("entities","get",{type:"option",name:"nonce"});return a+"?action=wc_pos_update_translations&security="+b}})}).call(b,function(){return this}())},function(a,b,c){function d(){this._filterResultCache={}}function e(a){for(var b in this._filterResultCache)this._filterResultCache.hasOwnProperty(b)&&delete this._filterResultCache[b][a]}function f(a,b){this._filters[a]&&e.call(this,a),this._filters[a]=b,this.trigger("filtered:add",a)}function g(a){delete this._filters[a],delete this._query,delete this._tokens,e.call(this,a),this.trigger("filtered:remove",a)}function h(a){this._filterResultCache[a.cid]||(this._filterResultCache[a.cid]={});var b=this._filterResultCache[a.cid];for(var c in this._filters)if(this._filters.hasOwnProperty(c)&&(b.hasOwnProperty(c)||(b[c]=this._filters[c].fn(a)),!b[c]))return!1;return!0}function i(){var a=[];this._superset&&(a=this._superset.filter(o.bind(h,this))),this._collection.reset(a),this.length=this._collection.length}function j(a){if(this._filterResultCache[a.cid]={},h.call(this,a)){if(!this._collection.get(a.cid)){for(var b=this.superset().indexOf(a),c=null,d=b-1;d>=0;d-=1)if(this.contains(this.superset().at(d))){c=this.indexOf(this.superset().at(d))+1;break}c=c||0,this._collection.add(a,{at:c})}}else this._collection.get(a.cid)&&this._collection.remove(a);this.length=this._collection.length}function k(a){this._filterResultCache[a.cid]={},h.call(this,a)||this._collection.get(a.cid)&&this._collection.remove(a)}function l(a,b,c){"change:"===a.slice(0,7)&&k.call(this,arguments[1])}function m(a){this.contains(a)&&this._collection.remove(a),this.length=this._collection.length}function n(a){this._superset=a,this._collection=new p.Collection(a.toArray()),q(this._collection,this),this.resetFilters(),this.listenTo(this._superset,"reset sort",i),this.listenTo(this._superset,"add change",j),this.listenTo(this._superset,"remove",m),this.listenTo(this._superset,"all",l)}var o=c(19),p=c(25),q=c(133),r=c(168),s={defaultFilterName:"__default",filterBy:function(a,b){return b||(b=a,a=this.defaultFilterName),f.call(this,a,r(b)),i.call(this),this},removeFilter:function(a){return a||(a=this.defaultFilterName),g.call(this,a),i.call(this),this},resetFilters:function(){return this._filters={},d.call(this),this.trigger("filtered:reset"),i.call(this),this},superset:function(){return this._superset},refilter:function(a){return"object"==typeof a&&a.cid?j.call(this,a):(d.call(this),i.call(this)),this},getFilters:function(){return o.keys(this._filters)},hasFilter:function(a){return o.contains(this.getFilters(),a)},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("filtered:destroy")}};o.extend(n.prototype,s,p.Events),a.exports=n},function(a,b,c){function d(a){return k.isFunction(a)?a:function(b){return b.get(a)}}function e(a){return this._comparator?n(this._collection.models,a,d(this._comparator),this._reverse):this._superset.indexOf(a)}function f(a){var b=e.call(this,a);this._collection.add(a,{at:b})}function g(a){this.contains(a)&&this._collection.remove(a)}function h(a){this.contains(a)&&this._collection.indexOf(a)!==e.call(this,a)&&(this._collection.remove(a),f.call(this,a))}function i(){if(!this._comparator)return void this._collection.reset(this._superset.toArray());var a;a=k.isString(this._comparator)||1===this._comparator.length?this._superset.sortBy(this._comparator):this._superset.models.sort(this._comparator),this._collection.reset(this._reverse?a.reverse():a)}function j(a){this._superset=a,this._reverse=!1,this._comparator=null,this._collection=new l.Collection(a.toArray()),m(this._collection,this),this.listenTo(this._superset,"add",f),this.listenTo(this._superset,"remove",g),this.listenTo(this._superset,"change",h),this.listenTo(this._superset,"reset",i)}var k=c(19),l=c(25),m=c(133),n=c(169),o={setSort:function(a,b){return this._reverse="desc"===b?!0:!1,this._comparator=a,i.call(this),this.trigger(a?"sorted:add":"sorted:remove"),this},reverseSort:function(){return this._reverse=!this._reverse,i.call(this),this},removeSort:function(){return this.setSort(),this},superset:function(){return this._superset},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("sorted:destroy")}};k.extend(j.prototype,o,l.Events),a.exports=j},function(a,b,c){function d(){if(this._infinite)var a=0,b=this._collection.length;else var a=this.getPage()*this.getPerPage(),b=a+this.getPerPage();return[a,b]}function e(){var a=d.call(this);return this._collection.reset(this.superset().slice(a[0],a[1]))}function f(){var a=0,b=this._collection.length+this.getPerPage();return this._collection.add(this.superset().slice(a,b))}function g(){var a=this.getPerPage(),b=this.superset().length-this._collection.length,c=b%a===0?b/a:Math.floor(b/a)+1;return c+1}function h(){var a=this.superset().length,b=this.getPerPage(),c=a%b===0?a/b:Math.floor(a/b)+1,d=this._totalPages!==c;return this._totalPages=c,d&&this.trigger("paginated:change:numPages",{numPages:c}),this.getPage()>=c?(this.setPage(c-1),!0):void 0}function i(){this._infinite=!1,h.call(this)||e.call(this)}function j(a,b){for(var c=m.max([a.length,b.length]),d=0,e=0;c>d;d+=1,e+=1)if(a[d]!==b[e])if(b[d-1]===a[d])e-=1;else{if(b[d+1]!==a[d])return a[d];e+=1}}function k(a,b,c){if(!h.call(this)){var e,f=d.call(this),g=f[0],i=f[1],k=j(this.superset().slice(g,i),this._collection.toArray()),l=this._infinite&&c.add;l||(e=j(this._collection.toArray(),this.superset().slice(g,i))),e&&this._collection.remove(e),k&&this._collection.add(k,{at:this.superset().indexOf(k)-g})}}function l(a,b){this._superset=a,this._collection=new n.Collection(a.toArray()),this._page=0,this.setPerPage(b&&b.perPage?b.perPage:null),o(this._collection,this),this.listenTo(this._superset,"add remove",k),this.listenTo(this._superset,"reset sort",i)}var m=c(19),n=c(25),o=c(133),p={removePagination:function(){return this._infinite=!1,this.setPerPage(null),this},setPerPage:function(a){return this._perPage=a,i.call(this),this.setPage(0),this.trigger("paginated:change:perPage",{perPage:a,numPages:this.getNumPages()}),this},setPage:function(a){this._infinite=!1;var b=0,c=this.getNumPages()-1;return a=a>b?a:b,a=c>a?a:c,a=0>a?0:a,this._page=a,e.call(this),this.trigger("paginated:change:page",{page:a}),this},getPerPage:function(){return this._perPage||this.superset().length||1},getNumPages:function(){return this._infinite?g.call(this):this._totalPages},getPage:function(){return this._page},hasNextPage:function(){return this.getPage()<this.getNumPages()-1},hasPrevPage:function(){return this.getPage()>0},nextPage:function(){return this.movePage(1),this},prevPage:function(){return this.movePage(-1),this},firstPage:function(){this.setPage(0)},lastPage:function(){this.setPage(this.getNumPages()-1)},movePage:function(a){return this.setPage(this.getPage()+a),this},superset:function(){return this._superset},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this._page=0,this._totalPages=0,this.length=0,this._infinite=!1,this.trigger("paginated:destroy")},appendNextPage:function(){return this._infinite=!0,f.call(this),this.trigger("paginated:change:page",{page:0}),this}};m.extend(l.prototype,p,n.Events),a.exports=l},function(a,b,c){function d(a,b){function c(){b.length=a.length}function d(c){var d=e.toArray(arguments),f="change"===c||"change:"===c.slice(0,7);"reset"===c&&(b.models=a.models),e.contains(h,c)?(e.contains(["add","remove","destroy"],c)?d[2]=b:e.contains(["reset","sort"],c)&&(d[1]=b),b.trigger.apply(this,d)):f&&b.contains(d[1])&&b.trigger.apply(this,d)}var i={};return e.each(e.functions(f.Collection.prototype),function(b){e.contains(g,b)||(i[b]=function(){return a[b].apply(a,arguments)})}),e.extend(b,f.Events,i),b.listenTo(a,"all",c),b.listenTo(a,"all",d),b.models=a.models,c(),b}var e=c(19),f=c(25),g=["_onModelEvent","_prepareModel","_removeReference","_reset","add","initialize","sync","remove","reset","set","push","pop","unshift","shift","sort","parse","fetch","create","model","off","on","listenTo","listenToOnce","bind","trigger","once","stopListening"],h=["add","remove","reset","sort","destroy","sync","request","error"];a.exports=d},function(a,b,c){a.exports=c(171)},function(a,b,c){function d(a){return{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}function e(a,b){return f.all(a,function(a){return i[a.type](a,b)})}var f=c(19),g=c(195),h=new g,i={string:function(a,b){if(a=a||{},!f.isString(a.query))return!1;var c=f.chain(b.fields||["title"]).map(function(a){return b.get(a)}).compact().value();return f.any(c,function(b){return this._partialString(b,a.query.toLowerCase())},this)},prefix:function(a,b){if(a=a||{},!f.isString(a.query))return!1;var c=b.get(a.prefix),e=d(c);return this.hasOwnProperty("_"+e)?this["_"+e](c,a.query.toLowerCase()):void 0},or:function(a,b){return f.any(a.queries,function(a){return this[a.type](a,b)},this)},_string:function(a,b){return a.toLowerCase()===b},_partialString:function(a,b){return-1!==a.toLowerCase().indexOf(b)},_number:function(a,b){return a.toString()===b},_partialNumber:function(a,b){return-1!==a.toString().indexOf(b)},_boolean:function(a,b){return"true"===b?a===!0:"false"===b?a===!1:!1},_array:function(a,b){return f.any(a,function(a){return a.toLowerCase()===b})}};a.exports=function(a,b){var c=f.isArray(a)?a:h.parse(a);return this._tokens=c,b.matchMaker?b.matchMaker(c,i,e):e(c,b)}},function(a,b,c){function d(a,b,c,n,p){if(!j(a))return a;var q=i(b)&&(h(b)||l(b));if(!q){var r=m(b);o.apply(r,g(b))}return e(r||b,function(e,g){if(r&&(g=e,e=b[g]),k(e))n||(n=[]),p||(p=[]),f(a,b,g,d,c,n,p);else{var h=a[g],i=c?c(h,e,g,a,b):void 0,j=void 0===i;j&&(i=e),!q&&void 0===i||!j&&(i===i?i===h:h!==h)||(a[g]=i)}}),a}var e=c(173),f=c(174),g=c(175),h=c(176),i=c(177),j=c(178),k=c(179),l=c(180),m=c(181),n=Array.prototype,o=n.push;a.exports=d},function(a,b,c){function d(a){return g(function(b,c){var d=-1,g=null==b?0:c.length,h=g>2&&c[g-2],i=g>2&&c[2],j=g>1&&c[g-1];for("function"==typeof h?(h=e(h,j,5),g-=2):(h="function"==typeof j?j:null,g-=h?1:0),i&&f(c[0],c[1],i)&&(h=3>g?null:h,g=1);++d<g;){var k=c[d];k&&a(b,k,h)}return b})}var e=c(182),f=c(183),g=c(184);a.exports=d},function(a,b,c){a.exports='<p>\n  {{message}}\n  {{#if raw}}\n    <a href="#" data-action="raw"><i class="icon icon-info-circle"></i></a>\n  {{/if}}\n<p>\n{{#if raw}}\n  <div class="raw-output" style="display:none">{{{raw}}}</div>\n{{/if}}'},function(a,b,c){a.exports='{{#each buttons}}\n\n  {{#if this.button}}\n    <button class="btn {{this.className}}"\n            {{#if this.action}}data-action="{{this.action}}"{{/if}}\n      {{#if this.toggle}}data-toggle="{{this.toggle}}"{{/if}}\n      {{#if this.loading}}data-loading="{{this.loadingText}}"{{/if}}\n      {{#if this.icon}}data-icon="{{this.icon}}"{{/if}}\n      {{#if this.disabled}}disabled{{/if}}\n      >\n      {{this.label}}\n    </button>\n  {{/if}}\n\n  {{#if this.link}}\n    <a href="#" class="btn {{this.className}}"\n       {{#if this.action}}data-action="{{this.action}}"{{/if}}\n      {{#if this.toggle}}data-toggle="{{this.toggle}}"{{/if}}\n      {{#if this.loading}}data-loading="{{this.loadingText}}"{{/if}}\n      {{#if this.icon}}data-icon="{{this.icon}}"{{/if}}\n      >\n      {{this.label}}\n    </a>\n  {{/if}}\n\n  {{#if this.input}}\n    <input type="button" class="btn {{this.className}}" value="{{this.label}}"\n           {{#if this.action}}data-action="{{this.action}}"{{/if}}\n      {{#if this.toggle}}data-toggle="{{this.toggle}}"{{/if}}\n      {{#if this.loading}}data-loading="{{this.loadingText}}"{{/if}}\n      >\n  {{/if}}\n\n  {{#if this.message}}\n    <p class="message {{this.className}}"></p>\n  {{/if}}\n\n{{/each}}'},,function(a,b,c){function d(){return b.colors[k++%b.colors.length]}function e(a){function c(){}function e(){var a=e,c=+new Date,f=c-(j||c);a.diff=f,a.prev=j,a.curr=c,j=c,null==a.useColors&&(a.useColors=b.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=b.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(c,d){if("%%"===c)return c;h++;var e=b.formatters[d];if("function"==typeof e){var f=g[h];c=e.call(a,f),g.splice(h,1),h--}return c}),"function"==typeof b.formatArgs&&(g=b.formatArgs.apply(a,g));var i=e.log||b.log||console.log.bind(console);i.apply(a,g)}c.enabled=!1,e.enabled=!0;var f=b.enabled(a)?e:c;return f.namespace=a,f}function f(a){b.save(a);for(var c=(a||"").split(/[\s,]+/),d=c.length,e=0;d>e;e++)c[e]&&(a=c[e].replace(/\*/g,".*?"),"-"===a[0]?b.skips.push(new RegExp("^"+a.substr(1)+"$")):b.names.push(new RegExp("^"+a+"$")))}function g(){b.enable("")}function h(a){var c,d;for(c=0,d=b.skips.length;d>c;c++)if(b.skips[c].test(a))return!1;for(c=0,d=b.names.length;d>c;c++)if(b.names[c].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}b=a.exports=e,b.coerce=i,b.disable=g,b.enable=f,b.enabled=h,b.humanize=c(196),b.names=[],b.skips=[],b.formatters={};var j,k=0},function(a,b,c){var d=c(78),e=c(2),f=c(19);a.exports=e.DualModel=d.extend({idAttribute:"local_id",remoteIdAttribute:"id",fields:["title"],validate:function(a){var b={};a[this.idAttribute]&&(b[this.idAttribute]=parseInt(a[this.idAttribute],10)),a[this.remoteIdAttribute]&&(b[this.remoteIdAttribute]=parseInt(a[this.remoteIdAttribute],10)),this.set(b,{silent:!0})},url:function(){var a=this.get(this.remoteIdAttribute),b=f.result(this.collection,"url");return a?""+b+"/"+a+"/":b},states:{update:"UPDATE_FAILED",create:"CREATE_FAILED","delete":"DELETE_FAILED"},hasRemoteId:function(){return!!this.get(this.remoteIdAttribute)},isDelayed:function(){var a=this.get("status");return a===this.states.update||a===this.states.create||a===this.states["delete"]},sync:function(a,b,c){c=c||{};var e=f.clone(c);return e.remote=void 0,this.setStatus(a),d.prototype.sync.call(this,a,b,e).then(function(){return c.remote?b.remoteSync(a,b,c):void 0})},remoteSync:function(a,b,c){return b=b||this,c=c||{},c.remote=!0,"read"!==a&&(a=b.getMethod(a)),d.prototype.sync.call(this,a,b,c).then(function(a){if(a){var c=b.parse(a);return b.merge(c);

}})},setStatus:function(a){this.states[a]&&("update"!==a||this.hasRemoteId()||(a="create"),this.set({status:this.states[a]}))},getMethod:function(a){var b=this.get("status"),c=f.findKey(this.states,function(a){return a===b});return c?c:a},merge:function(a){return this.set(a),this.isDelayed()&&this.unset("status"),this.collection&&this.collection.db?this.collection.merge(this.toJSON()):void 0}})},function(a,b,c){var d=c(25),e=c(2);a.exports=e.Model=d.Model.extend({constructor:function(){d.Model.apply(this,arguments)},parse:function(a){return a&&a[this.name]?a[this.name]:a}})},function(a,b,c){function d(a){var b={},c=i.keyPathSeparator;for(var e in a){var f=a[e];if(!f||f.constructor!==Object&&f.constructor!==Array||h.isEmpty(f))b[e]=f;else{var g=d(f);for(var j in g){var k=g[j];b[e+c+j]=k}}}return b}function e(a,b,c){for(var d=i.keyPathSeparator,e=b?b.split(d):[],f=a,g=0,j=e.length;j>g;g++){if(c&&!h.has(f,e[g]))return!1;if(f=f[e[g]],null==f&&j-1>g&&(f={}),"undefined"==typeof f)return c?!0:f}return c?!0:f}function f(a,b,c,d){d=d||{};for(var e=i.keyPathSeparator,f=b?b.split(e):[],g=a,j=0,k=f.length;k>j&&void 0!==g;j++){var l=f[j];if(j===k-1)d.unset?delete g[l]:g[l]=c;else{if("undefined"==typeof g[l]||!h.isObject(g[l])){if(d.unset)return void delete g[l];var m=f[j+1];g[l]=/^\d+$/.test(m)?[]:{}}g=g[l]}}}function g(a,b){f(a,b,null,{unset:!0})}var h=c(19),i={constructor:function(a,b){var c=a||{};this.cid=h.uniqueId("c"),this.attributes={},b&&b.collection&&(this.collection=b.collection),b&&b.parse&&(c=this.parse(c,b)||{}),c=h.merge({},h.result(this,"defaults"),c),this.set(c,b),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(a){return h.merge({},this.attributes)},get:function(a){return e(this.attributes,a)},set:function(a,b,c){var j,k,l,m,n,o,p,q;if(null==a)return this;if("object"==typeof a?(k=a,c=b||{}):(k={})[a]=b,c||(c={}),!this._validate(k,c))return!1;l=c.unset,n=c.silent,m=[],o=this._changing,this._changing=!0,o||(this._previousAttributes=h.merge({},this.attributes),this.changed={}),q=this.attributes,p=this._previousAttributes,this.idAttribute in k&&(this.id=k[this.idAttribute]),k=d(k);for(j in k)b=k[j],h.isEqual(e(q,j),b)||m.push(j),h.isEqual(e(p,j),b)?g(this.changed,j):f(this.changed,j,b),l?g(q,j):f(q,j,b);if(!n){m.length&&(this._pending=!0);for(var r=i.keyPathSeparator,s={},t=0,u=m.length;u>t;t++){var a=m[t];s.hasOwnProperty(a)&&s[a]||(s[a]=!0,this.trigger("change:"+a,this,e(q,a),c));for(var v=a.split(r),w=v.length-1;w>0;w--){var x=v.slice(0,w).join(r),y=x+r+"*";s.hasOwnProperty(y)&&s[y]||(s[y]=!0,this.trigger("change:"+y,this,e(q,x),c)),s.hasOwnProperty(x)&&s[x]||(s[x]=!0,this.trigger("change:"+x,this,e(q,x),c))}}}if(o)return this;if(!n)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);return this._pending=!1,this._changing=!1,this},clear:function(a){var b={},c=d(this.attributes);for(var e in c)b[e]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):void 0!==e(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?d(this.changed):!1;var b=this._changing?this._previousAttributes:this.attributes;a=d(a),b=d(b);var c,e=!1;for(var f in a)h.isEqual(b[f],c=a[f])||((e||(e={}))[f]=c);return e},previous:function(a){return null!=a&&this._previousAttributes?e(this._previousAttributes,a):null},previousAttributes:function(){return h.merge({},this._previousAttributes)}};i.keyPathSeparator=".",a.exports=i},function(a,b,c){function d(a,b){this.parent=b,this.options=a,a.defaultErrorHandler&&(j=a.defaultErrorHandler)}var e=c(172),f=c(20),g=c(19),h=c(25),i=function(){},j=function(a){throw a},k={open:function(){if(this._open)return this._open;var a=new f.Deferred,b=this.options||{};return b.onStoreReady=a.resolve,b.onError=a.reject,this.store=new e(b),this._open=a.promise(),this._open},create:function(a,b){b=b||{};var c=b.success||i,d=b.error||j,e=this._returnAttributes(a),f=this.store.keyPath;return this.put(e).then(function(a){return e[f]=a,c(e),e}).fail(d)},update:function(a,b){b=b||{};var c=b.success||i,d=b.error||j,e=this._returnAttributes(a),f=this;return this.put(e).then(function(a){return f.get(a).done(c).fail(d)}).fail(d)},read:function(a,b){b=b||{};var c=b.success||i,d=b.error||j;return this.get(a.id).done(c).fail(d)},destroy:function(a,b){if(a.isNew())return!1;b=b||{};var c=b.success||i,d=b.error||j;return this.remove(a.id).done(c).fail(d)},put:function(a,b){var c=new f.Deferred;return null!==this.store.keyPath?this.store.put(a,c.resolve,c.reject):this.store.put(a,b,c.resolve,c.reject),c.promise()},get:function(a){var b=new f.Deferred;return this.store.get(a,b.resolve,b.reject),b.promise()},remove:function(a){return g.isObject(a)&&a.hasOwnProperty(this.store.keyPath)&&(a=a[this.store.keyPath]),this._remove(a)},_remove:function(a){var b=new f.Deferred;return this.store.remove(a,b.resolve,b.reject),b.promise()},getAll:function(a){var b=new f.Deferred,c=function(c){a.success.apply(this,arguments),b.resolve(c)},d=function(c){a.error.apply(this,arguments),b.reject(c)};return this.store.getAll(c,d),b.promise()},iterate:function(a){a=a||{};var b=new f.Deferred;a.onEnd=b.resolve,a.onError=b.reject;var c=b.notify;return this.store.iterate(c,a),b.promise()},makeKeyRange:function(a){return this.store.makeKeyRange(a)},saveAll:function(){return this.putBatch(this.parent.toJSON())},batch:function(a){var b=new f.Deferred;return this.store.batch(a,b.resolve,b.reject),b.promise()},putBatch:function(a){return g.isArray(a)?this._putBatch(a):this.put(a)},_putBatch:function(a){var b=new f.Deferred;return this.store.putBatch(a,b.resolve,b.reject),b.promise()},removeBatch:function(a){return g.isArray(a)?this._removeBatch(a):this.remove(a)},_removeBatch:function(a){var b=new f.Deferred;return this.store.removeBatch(a,b.resolve,b.reject),b.promise()},clear:function(){var a=new f.Deferred;return this.store.clear(a.resolve,a.reject),a.promise()},query:function(a,b){var c=new f.Deferred;return this.store.query(c.resolve,{index:a,keyRange:b,onError:c.reject}),c.promise()},getByAttribute:function(a){var b=g.chain(a).keys().first().value(),c=this.store.makeKeyRange({only:g.chain(a).values().first().value()});return this.query(b,c)},merge:function(a){if(a=g.isArray(a)?a:[a],!this.parent.mergeKeyPath)return this.putBatch(a);var b=g.map(a,this._merge,this);return f.when.apply(this,b)},_merge:function(a){var b=this.parent.mergeKeyPath,c=this.store.keyPath,d=this,e={};return a[c]?this.update(a):(e[b]=a[b],this.getByAttribute(e).then(function(b){var e=g.first(b);return e?(a[c]=e[c],d.update(a)):d.create(a)}))},_returnAttributes:function(a){return a instanceof h.Model?a.toJSON():a}};g.extend(d.prototype,k),a.exports=d},function(a,b,c){var d=c(70),e=c(2);a.exports=e.Behavior=d.Behavior},function(a,b,c){var d=c(25),e=c(19);d.Stickit.addHandler({selector:".autogrow",afterUpdate:function(a){a.trigger("input")}}),d.Stickit.addHandler({selector:"select[multiple].select2",onSet:function(a,b){return e.isArray(a)&&this.model.unset(b.observe,{silent:!0}),a}})},function(a,b,c){var d=c(26),e=c(188),f=c(19),g=c(73)("loading");a.exports=d.extend({channelName:"loading",initialize:function(a){f.defaults(a,{type:"spinner",message:""}),a.container&&this[a.type]?this[a.type](a):g("invalid loading options",a)},spinner:function(a){var b=new e({message:a.message});a.container.show(b)},opacity:function(a){a.container.currentView.$el.css({opacity:.5})}})},function(a,b,c){var d=c(146),e=c(2);c(159);var f=d.extend({initialize:function(a){this.options=a},ui:{tooltip:'*[data-toggle="tooltip"]'},onRender:function(){this.ui.tooltip.tooltip(this.options)}});a.exports=f,e.attach("Behaviors.Tooltip",f)},function(a,b,c){var d=c(146),e=c(19),f=c(2),g=d.extend({initialize:function(a){a=a||{};var b={},c=["query","initSelection","formatResult","formatSelection"];e.each(c,function(c){this.view[c]&&(a[c]=e.bind(this.view[c],this.view)),b[c]=this[c]},this),this.options=e.defaults(a,b)},ui:{select:".select2"},onRender:function(){this.ui.select.hasClass("no-search")&&(this.options.dropdownCssClass="no-search"),this.ui.select.select2(this.options)},onBeforeDestroy:function(){this.ui.select.select2("destroy")},onSelectDisable:function(a){this.ui.select.attr("disabled",a)}});a.exports=g,f.attach("Behaviors.Select2",g)},,,,,,,function(a,b,c){+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.4",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a('<div class="modal-backdrop '+e+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery)},function(a,b,c){+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery)},function(a,b,c){+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.3.4",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c&&c.$tip&&c.$tip.is(":visible")?void(c.hoverState="in"):(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.options.container?a(this.options.container):this.$element.parent(),p=this.getPosition(o);h="bottom"==h&&k.bottom+m>p.bottom?"top":"top"==h&&k.top-m<p.top?"bottom":"right"==h&&k.right+l>p.width?"left":"left"==h&&k.left-l<p.left?"right":h,f.removeClass(n).addClass(h)}var q=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(q,h);var r=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",r).emulateTransitionEnd(c.TRANSITION_DURATION):r()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type)})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery)},,,function(a,b,c){a.exports='{{#unless fixed}}\n<a href="#" data-action="remove">\n  <i class="icon icon-times-circle"></i>\n</a>\n{{/unless}}\n{{{ label }}}'},,,,,function(a,b,c){var d=c(146),e=c(2),f=c(20),g=c(19),h=d.extend({initialize:function(a){this.options=g.defaults(a,{items:"tr",cursor:"move",axis:"y",handle:"td",scrollSensitivity:40,helper:function(a,b){return b.children().each(function(){f(this).width(f(this).width())}),b},start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.removeAttr("style"),f("input.gateway_order",this).each(function(a){f(this).val(a),f(this).trigger("input")})}})},ui:{sortable:".sortable"},onRender:function(){if(this.ui.sortable.length>0){var a=this.ui.sortable,b=a.find("tbody tr").get();a.append(b.sort(function(a,b){return parseInt(f(a).find("input.gateway_order").val(),10)-parseInt(f(b).find("input.gateway_order").val(),10)})),a.sortable(this.options)}}});a.exports=h,e.attach("Behaviors.Sortable",h)},function(a,b,c){function d(a,b){return function(c){return c.get(a)===b}}function e(a,b){return function(c){return b(c.get(a))}}function f(a,b){return i.isArray(b)||(b=null),{fn:a,keys:b}}function g(a){var b=i.keys(a),c=i.map(b,function(b){var c=a[b];return i.isFunction(c)?e(b,c):d(b,c)}),g=function(a){for(var b=0;b<c.length;b++)if(!c[b](a))return!1;return!0};return f(g,b)}function h(a,b){return i.isFunction(a)?f(a,b):i.isObject(a)?g(a):void 0}var i=c(19);a.exports=h},function(a,b,c){function d(a,b){return function(c,d){var e=a(c),f=a(d);return e===f?0:b?f>e?1:-1:f>e?-1:1}}function e(a,b){return 2===a.length?a:d(a,b)}function f(a,b,c,d){c=null===c?g.identity:e(c,d);for(var f=0,h=a.length;h>f;){var i=f+h>>>1;c(a[i],b)<0?f=i+1:h=i}return f}var g=c(19);a.exports=f},,function(a,b,c){!function(b){"use strict";function c(a){a=a||{},this.phrases={},this.extend(a.phrases||{}),this.currentLocale=a.locale||"en",this.allowMissing=!!a.allowMissing,this.warn=a.warn||j}function d(a){var b,c,d,e={};for(b in a)if(a.hasOwnProperty(b)){c=a[b];for(d in c)e[c[d]]=b}return e}function e(a){var b=/^\s+|\s+$/g;return a.replace(b,"")}function f(a,b,c){var d,f,g;return null!=c&&a?(f=a.split(l),g=f[h(b,c)]||f[0],d=e(g)):d=a,d}function g(a){var b=d(n);return b[a]||b.en}function h(a,b){return m[g(a)](b)}function i(a,b){for(var c in b)"_"!==c&&b.hasOwnProperty(c)&&(a=a.replace(new RegExp("%\\{"+c+"\\}","g"),b[c]));return a}function j(a){b.console&&b.console.warn&&b.console.warn("WARNING: "+a)}function k(a){var b={};for(var c in a)b[c]=a[c];return b}c.VERSION="0.4.1",c.prototype.locale=function(a){return a&&(this.currentLocale=a),this.currentLocale},c.prototype.extend=function(a,b){var c;for(var d in a)a.hasOwnProperty(d)&&(c=a[d],b&&(d=b+"."+d),"object"==typeof c?this.extend(c,d):this.phrases[d]=c)},c.prototype.clear=function(){this.phrases={}},c.prototype.replace=function(a){this.clear(),this.extend(a)},c.prototype.t=function(a,b){var c;b=null==b?{}:b,"number"==typeof b&&(b={smart_count:b});var d=this.phrases[a]||b._||(this.allowMissing?a:"");return""===d?(this.warn('Missing translation for key: "'+a+'"'),c=a):(b=k(b),c=f(d,this.currentLocale,b.smart_count),c=i(c,b)),c};var l="||||",m={chinese:function(a){return 0},german:function(a){return 1!==a?1:0},french:function(a){return a>1?1:0},russian:function(a){return a%10===1&&a%100!==11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2},czech:function(a){return 1===a?0:a>=2&&4>=a?1:2},polish:function(a){return 1===a?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2},icelandic:function(a){return a%10!==1||a%100===11?1:0}},n={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};"undefined"!=typeof a&&a.exports?a.exports=c:b.Polyglot=c}(this)},function(a,b,c){a.exports=IDBStore},function(a,b,c){function d(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}a.exports=d},function(a,b,c){function d(a,b,c,d,l,m,n){for(var o=m.length,p=b[c];o--;)if(m[o]==p)return void(a[c]=n[o]);var q=a[c],r=l?l(q,p,c,a,b):void 0,s=void 0===r;s&&(r=p,h(p)&&(g(p)||j(p))?r=g(q)?q:h(q)?e(q):[]:i(p)||f(p)?r=f(q)?k(q):i(q)?q:{}:s=!1),m.push(p),n.push(r),s?a[c]=d(r,p,l,m,n):(r===r?r!==q:q===q)&&(a[c]=r)}var e=c(197),f=c(198),g=c(176),h=c(177),i=c(199),j=c(180),k=c(200);a.exports=d},function(a,b,c){var d=c(201),e=c(202),f=c(203),g=e(g=Object.getOwnPropertySymbols)&&g,h=g?function(a){return g(f(a))}:d([]);a.exports=h},function(a,b,c){var d=c(204),e=c(202),f=c(179),g="[object Array]",h=Object.prototype,i=h.toString,j=e(j=Array.isArray)&&j,k=j||function(a){return f(a)&&d(a.length)&&i.call(a)==g};a.exports=k},function(a,b,c){function d(a){return null!=a&&f(e(a))}var e=c(205),f=c(204);a.exports=d},function(a,b,c){function d(a){var b=typeof a;return"function"==b||!!a&&"object"==b}a.exports=d},function(a,b,c){function d(a){return!!a&&"object"==typeof a}a.exports=d},function(a,b,c){function d(a){return f(a)&&e(a.length)&&!!D[F.call(a)]}var e=c(204),f=c(179),g="[object Arguments]",h="[object Array]",i="[object Boolean]",j="[object Date]",k="[object Error]",l="[object Function]",m="[object Map]",n="[object Number]",o="[object Object]",p="[object RegExp]",q="[object Set]",r="[object String]",s="[object WeakMap]",t="[object ArrayBuffer]",u="[object Float32Array]",v="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",y="[object Int32Array]",z="[object Uint8Array]",A="[object Uint8ClampedArray]",B="[object Uint16Array]",C="[object Uint32Array]",D={};D[u]=D[v]=D[w]=D[x]=D[y]=D[z]=D[A]=D[B]=D[C]=!0,D[g]=D[h]=D[t]=D[i]=D[j]=D[k]=D[l]=D[m]=D[n]=D[o]=D[p]=D[q]=D[r]=D[s]=!1;var E=Object.prototype,F=E.toString;a.exports=d},function(a,b,c){var d=c(177),e=c(202),f=c(178),g=c(206),h=e(h=Object.keys)&&h,i=h?function(a){var b=null!=a&&a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&d(a)?g(a):f(a)?h(a):[]}:g;a.exports=i},function(a,b,c){function d(a,b,c){if("function"!=typeof a)return e;if(void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}var e=c(207);a.exports=d},function(a,b,c){function d(a,b,c){if(!g(c))return!1;var d=typeof b;if("number"==d?e(c)&&f(b,c.length):"string"==d&&b in c){var h=c[b];return a===a?a===h:h!==h}return!1}var e=c(177),f=c(208),g=c(178);a.exports=d},function(a,b,c){function d(a,b){if("function"!=typeof a)throw new TypeError(e);return b=f(void 0===b?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,e=f(c.length-b,0),g=Array(e);++d<e;)g[d]=c[b+d];switch(b){case 0:return a.call(this,g);case 1:return a.call(this,c[0],g);case 2:return a.call(this,c[0],c[1],g)}var h=Array(b+1);for(d=-1;++d<b;)h[d]=c[d];return h[b]=g,a.apply(this,h)}}var e="Expected a function",f=Math.max;a.exports=d},function(a,b,c){!function(b){a.exports=b(c(25),c(19))}(function(a,b){return a.Validation=function(a){"use strict";var b={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},c={formatLabel:function(a,c){return i[b.labelFormatter](a,c)},format:function(){var a=Array.prototype.slice.call(arguments),b=a.shift();return b.replace(/\{(\d+)\}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}},d=function(b,c,e){return c=c||{},e=e||"",a.each(b,function(a,f){b.hasOwnProperty(f)&&(a&&"object"==typeof a&&a.constructor===Object&&d(a,c,e+f+"."),c[e+f]=a)}),c},e=function(){var e=function(b,c){return c=c||a.keys(a.result(b,"validation")||{}),a.reduce(c,function(a,b){return a[b]=void 0,a},{})},g=function(b,c){var d=b.attributes;return a.isFunction(d)?d=d(c):a.isString(d)&&a.isFunction(j[d])&&(d=j[d](c)),a.isArray(d)?d:void 0},h=function(b,c){var d=b.validation?a.result(b,"validation")[c]||{}:{};return(a.isFunction(d)||a.isString(d))&&(d={fn:d}),a.isArray(d)||(d=[d]),a.reduce(d,function(b,c){return a.each(a.without(a.keys(c),"msg"),function(a){b.push({fn:k[a],val:c[a],msg:c.msg})}),b},[])},i=function(b,d,e,f){return a.reduce(h(b,d),function(g,h){var i=a.extend({},c,k),j=h.fn.call(i,e,d,h.val,b,f);return j===!1||g===!1?!1:j&&!g?a.result(h,"msg")||j:g},"")},l=function(b,c,d){var e,f={},g=!0,h=a.clone(c);return a.each(d,function(a,c){e=i(b,c,a,h),e&&(f[c]=e,g=!1)}),{invalidAttrs:f,isValid:g}},m=function(b,c){return{preValidate:function(b,c){var d,e=this,f={};return a.isObject(b)?(a.each(b,function(a,b){d=e.preValidate(b,a),d&&(f[b]=d)}),a.isEmpty(f)?void 0:f):i(this,b,c,a.extend({},this.attributes));

},isValid:function(e){var f,h,j,k;return e=e||g(c,b),a.isString(e)?h=[e]:a.isArray(e)&&(h=e),h&&(f=d(this.attributes),a.each(this.associatedViews,function(b){a.each(h,function(d){j=i(this,d,f[d],a.extend({},this.attributes)),j?(c.invalid(b,d,j,c.selector),k=k||{},k[d]=j):c.valid(b,d,c.selector)},this)},this)),e===!0&&(k=this.validate()),k&&this.trigger("invalid",this,k,{validationError:k}),h?!k:this.validation?this._isValid:!0},validate:function(f,h){var i=this,j=!f,k=a.extend({},c,h),m=e(i,g(c,b)),n=a.extend({},m,i.attributes,f),o=d(n),p=f?d(f):o,q=l(i,n,a.pick(o,a.keys(m)));return i._isValid=q.isValid,a.each(i.associatedViews,function(b){a.each(m,function(a,c){var d=q.invalidAttrs.hasOwnProperty(c),e=p.hasOwnProperty(c);d||k.valid(b,c,k.selector),d&&(e||j)&&k.invalid(b,c,q.invalidAttrs[c],k.selector)})}),a.defer(function(){i.trigger("validated",i._isValid,i,q.invalidAttrs),i.trigger("validated:"+(i._isValid?"valid":"invalid"),i,q.invalidAttrs)}),!k.forceUpdate&&a.intersection(a.keys(q.invalidAttrs),a.keys(p)).length>0?q.invalidAttrs:void 0}}},n=function(b,c,d){c.associatedViews?c.associatedViews.push(b):c.associatedViews=[b],a.extend(c,m(b,d))},o=function(b,c){c&&b.associatedViews.length>1?b.associatedViews=a.without(b.associatedViews,c):(delete b.validate,delete b.preValidate,delete b.isValid,delete b.associatedViews)},p=function(a){n(this.view,a,this.options)},q=function(a){o(a)};return{version:"0.11.3",configure:function(c){a.extend(b,c)},bind:function(c,d){d=a.extend({},b,f,d);var e=d.model||c.model,g=d.collection||c.collection;if("undefined"==typeof e&&"undefined"==typeof g)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";e?n(c,e,d):g&&(g.each(function(a){n(c,a,d)}),g.bind("add",p,{view:c,options:d}),g.bind("remove",q))},unbind:function(b,c){c=a.extend({},c);var d=c.model||b.model,e=c.collection||b.collection;d?o(d,b):e&&(e.each(function(a){o(a,b)}),e.unbind("add",p),e.unbind("remove",q))},mixin:m(null,b)}}(),f=e.callbacks={valid:function(a,b,c){a.$("["+c+'~="'+b+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(a,b,c,d){a.$("["+d+'~="'+b+'"]').addClass("invalid").attr("data-error",c)}},g=e.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},h=e.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number",email:"{0} must be a valid email",url:"{0} must be a valid url",inlinePattern:"{0} is invalid"},i=e.labelFormatters={none:function(a){return a},sentenceCase:function(a){return a.replace(/(?:^\w|[A-Z]|\b\w)/g,function(a,b){return 0===b?a.toUpperCase():" "+a.toLowerCase()}).replace(/_/g," ")},label:function(a,b){return b.labels&&b.labels[a]||i.sentenceCase(a,b)}},j=e.attributeLoaders={inputNames:function(a){var b=[];return a&&a.$("form [name]").each(function(){/^(?:input|select|textarea)$/i.test(this.nodeName)&&this.name&&"submit"!==this.type&&-1===b.indexOf(this.name)&&b.push(this.name)}),b}},k=e.validators=function(){var b=String.prototype.trim?function(a){return null===a?"":String.prototype.trim.call(a)}:function(a){var b=/^\s+/,c=/\s+$/;return null===a?"":a.toString().replace(b,"").replace(c,"")},c=function(b){return a.isNumber(b)||a.isString(b)&&b.match(g.number)},d=function(c){return!(a.isNull(c)||a.isUndefined(c)||a.isString(c)&&""===b(c)||a.isArray(c)&&a.isEmpty(c))};return{fn:function(b,c,d,e,f){return a.isString(d)&&(d=e[d]),d.call(e,b,c,f)},required:function(b,c,e,f,g){var i=a.isFunction(e)?e.call(f,b,c,g):e;return i||d(b)?i&&!d(b)?this.format(h.required,this.formatLabel(c,f)):void 0:!1},acceptance:function(b,c,d,e){return"true"===b||a.isBoolean(b)&&b!==!1?void 0:this.format(h.acceptance,this.formatLabel(c,e))},min:function(a,b,d,e){return!c(a)||d>a?this.format(h.min,this.formatLabel(b,e),d):void 0},max:function(a,b,d,e){return!c(a)||a>d?this.format(h.max,this.formatLabel(b,e),d):void 0},range:function(a,b,d,e){return!c(a)||a<d[0]||a>d[1]?this.format(h.range,this.formatLabel(b,e),d[0],d[1]):void 0},length:function(b,c,d,e){return a.isString(b)&&b.length===d?void 0:this.format(h.length,this.formatLabel(c,e),d)},minLength:function(b,c,d,e){return!a.isString(b)||b.length<d?this.format(h.minLength,this.formatLabel(c,e),d):void 0},maxLength:function(b,c,d,e){return!a.isString(b)||b.length>d?this.format(h.maxLength,this.formatLabel(c,e),d):void 0},rangeLength:function(b,c,d,e){return!a.isString(b)||b.length<d[0]||b.length>d[1]?this.format(h.rangeLength,this.formatLabel(c,e),d[0],d[1]):void 0},oneOf:function(b,c,d,e){return a.include(d,b)?void 0:this.format(h.oneOf,this.formatLabel(c,e),d.join(", "))},equalTo:function(a,b,c,d,e){return a!==e[c]?this.format(h.equalTo,this.formatLabel(b,d),this.formatLabel(c,d)):void 0},pattern:function(a,b,c,e){return d(a)&&a.toString().match(g[c]||c)?void 0:this.format(h[c]||h.inlinePattern,this.formatLabel(b,e),c)}}}();return a.each(k,function(b,d){k[d]=a.bind(k[d],a.extend({},c,k))}),e}(b),a.Validation})},function(a,b,c){var d,e,f;!function(g){e=[c(19),c(25),b],d=g,f="function"==typeof d?d.apply(b,e):d,!(void 0!==f&&(a.exports=f))}(function(a,b,c){b.Stickit=c,c._handlers=[],c.addHandler=function(b){b=a.map(a.flatten([b]),function(b){return a.defaults({},b,{updateModel:!0,updateView:!0,updateMethod:"text"})}),this._handlers=this._handlers.concat(b)},c.ViewMixin={_modelBindings:null,unstickit:function(b,c){if(a.isObject(c))return void a.each(c,function(a,c){this.unstickit(b,c)},this);var d=[],e=[];this._modelBindings=a.reject(this._modelBindings,function(a){return b&&a.model!==b||c&&a.config.selector!=c?void 0:(a.model.off(a.event,a.fn),e.push(a.config._destroy),d.push(a.model),!0)}),a.invoke(a.uniq(d),"trigger","stickit:unstuck",this.cid),a.each(a.uniq(e),function(a){a.call(this)},this),this.$el.off(".stickit"+(b?"."+b.cid:""),c)},stickit:function(b,c){var d=b||this.model,e=c||a.result(this,"bindings")||{};this._modelBindings||(this._modelBindings=[]),this.addBinding(d,e);var f=this.remove;return f.stickitWrapped||(this.remove=function(){var a=this;return this.unstickit(),f&&(a=f.apply(this,arguments)),a}),this.remove.stickitWrapped=!0,this},addBinding:function(b,c,e){var p=b||this.model,q=".stickit."+p.cid;if(e=e||{},a.isObject(c)){var r=c;return void a.each(r,function(a,b){this.addBinding(p,b,a)},this)}var s=":el"===c?this.$el:this.$(c);if(this.unstickit(p,c),s.length){a.isString(e)&&(e={observe:e}),a.isFunction(e.observe)&&(e.observe=e.observe.call(this));var t=k(s,e),u=t.observe;t.selector=c,t.view=this;var v=t.bindId=a.uniqueId(),w=a.extend({stickitChange:t},t.setOptions);if(t._destroy=function(){f.call(this,t.destroy,s,p,t)},l(s,t,p,u),n(s,t,p,u),m(s,t,p,u),u){a.each(t.events,function(b){var e=b+q,h=function(a){var b=f.call(this,t.getVal,s,a,t,d.call(arguments,1)),c=g(t.updateModel,b,a,t);c&&i(p,u,b,w,t)},j=":el"===c?"":c;this.$el.on(e,j,a.bind(h,this))},this),a.each(a.flatten([u]),function(a){h(p,"change:"+a,t,function(a,b,c){var d=c&&c.stickitChange&&c.stickitChange.bindId;if(d!==v){var e=j(p,u,t);o(s,t,e,p)}})});var x=j(p,u,t);o(s,t,x,p,!0)}f.call(this,t.initialize,s,p,t)}}},a.extend(b.View.prototype,c.ViewMixin);var d=[].slice,e=function(b,c){var d=(c||"").split("."),e=a.reduce(d,function(a,b){return a[b]},b);return null==e?b:e},f=function(b){return b=a.isString(b)?e(this,b):b,b?b.apply(this,d.call(arguments,1)):void 0},g=function(b,c,d){if(a.isBoolean(b))return b;if(a.isFunction(b)||a.isString(b)){var e=a.last(arguments).view;return f.apply(e,arguments)}return!1},h=function(a,b,c,d){var e=c.view;a.on(b,d,e),e._modelBindings.push({model:a,event:b,fn:d,config:c})},i=function(b,c,d,e,g){var h={},i=g.view;g.onSet&&(d=f.call(i,g.onSet,d,g)),g.set?f.call(i,g.set,c,d,e,g):(h[c]=d,a.isArray(c)&&a.isArray(d)&&(h=a.reduce(c,function(b,c,e){return b[c]=a.has(d,e)?d[e]:null,b},{})),b.set(h,e))},j=function(b,c,d){var e=d.view,g=function(a){return b[d.escape?"escape":"get"](a)},h=function(a){return null==a?"":a},i=a.isArray(c)?a.map(c,g):g(c);return d.onGet&&(i=f.call(e,d.onGet,i,d)),a.isArray(i)?a.map(i,h):h(i)},k=c.getConfiguration=function(b,d){var e=[{updateModel:!1,updateMethod:"text",update:function(a,b,c,d){a[d.updateMethod]&&a[d.updateMethod](b)},getVal:function(a,b,c){return a[c.updateMethod]()}}];e=e.concat(a.filter(c._handlers,function(a){return b.is(a.selector)})),e.push(d);var f=a.extend.apply(a,e);return a.has(f,"updateView")||(f.updateView=!f.visible),f},l=function(b,c,d,e){var f=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","indeterminate","loop","multiple","open","readonly","required","scoped","selected"],g=c.view;a.each(c.attributes||[],function(i){i=a.clone(i),i.view=g;var k="",l=i.observe||(i.observe=e),m=function(){var c=a.contains(f,i.name)?"prop":"attr",e=j(d,l,i);"class"===i.name?(b.removeClass(k).addClass(e),k=e):b[c](i.name,e)};a.each(a.flatten([l]),function(a){h(d,"change:"+a,c,m)}),m()})},m=function(b,c,d,e){a.each(c.classes||[],function(e,f){a.isString(e)&&(e={observe:e}),e.view=c.view;var g=e.observe,i=function(){var a=j(d,g,e);b.toggleClass(f,!!a)};a.each(a.flatten([g]),function(a){h(d,"change:"+a,c,i)}),i()})},n=function(b,c,d,e){if(null!=c.visible){var g=c.view,i=function(){var h=c.visible,i=c.visibleFn,k=j(d,e,c),l=!!k;(a.isFunction(h)||a.isString(h))&&(l=!!f.call(g,h,k,c)),i?f.call(g,i,b,l,c):b.toggle(l)};a.each(a.flatten([e]),function(a){h(d,"change:"+a,c,i)}),i()}},o=function(a,b,c,d,e){var h=b.view;g(b.updateView,c,b)&&(f.call(h,b.update,a,c,d,b),e||f.call(h,b.afterUpdate,a,c,b))};return c.addHandler([{selector:"[contenteditable]",updateMethod:"html",events:["input","change"]},{selector:"input",events:["propertychange","input","change"],update:function(a,b){a.val(b)},getVal:function(a){return a.val()}},{selector:"textarea",events:["propertychange","input","change"],update:function(a,b){a.val(b)},getVal:function(a){return a.val()}},{selector:'input[type="radio"]',events:["change"],update:function(a,b){a.filter('[value="'+b+'"]').prop("checked",!0)},getVal:function(a){return a.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(c,d,e,f){if(c.length>1)d||(d=[]),c.each(function(c,e){var f=b.$(e),g=a.contains(d,f.val());f.prop("checked",g)});else{var g=a.isBoolean(d)?d:d===c.val();c.prop("checked",g)}},getVal:function(c){var d;if(c.length>1)d=a.reduce(c,function(a,c){var d=b.$(c);return d.prop("checked")&&a.push(d.val()),a},[]);else{d=c.prop("checked");var e=c.val();"on"!==e&&null!=e&&(d=d?c.val():null)}return d}},{selector:"select",events:["change"],update:function(c,d,g,h){var i,k=h.selectOptions,l=k&&k.collection||void 0,m=c.prop("multiple");if(!k){k={};var n=function(a){return a.map(function(a,c){var d=b.$(c).data("stickit-bind-val");return{value:void 0!==d?d:c.value,label:c.text}}).get()};c.find("optgroup").length?(l={opt_labels:[]},c.find("> option").length&&(l.opt_labels.push(void 0),a.each(c.find("> option"),function(a){l[void 0]=n(b.$(a))})),a.each(c.find("optgroup"),function(a){var c=b.$(a).attr("label");l.opt_labels.push(c),l[c]=n(b.$(a).find("option"))})):l=n(c.find("option"))}k.valuePath=k.valuePath||"value",k.labelPath=k.labelPath||"label",k.disabledPath=k.disabledPath||"disabled";var o=function(c,d,f){a.each(c,function(c){var g,h,i,j=b.$("<option/>"),l=c,n=function(b,c,d){j.text(b),l=c,j.data("stickit-bind-val",l),a.isArray(l)||a.isObject(l)||j.val(l),d===!0&&j.prop("disabled","disabled")};"__default__"===c?(g=f.label,h=f.value,i=f.disabled):(g=e(c,k.labelPath),h=e(c,k.valuePath),i=e(c,k.disabledPath)),n(g,h,i);var o=function(){return m||null==l||null==f||l!==f?a.isObject(f)&&a.isEqual(l,f)?!0:!1:!0};o()?j.prop("selected",!0):m&&a.isArray(f)&&a.each(f,function(b){a.isObject(b)&&(b=e(b,k.valuePath)),(b===l||a.isObject(b)&&a.isEqual(l,b))&&j.prop("selected",!0)}),d.append(j)})};if(c.find("*").remove(),a.isString(l)){var p=window;0===l.indexOf("this.")&&(p=this),l=l.replace(/^[a-z]*\.(.+)$/,"$1"),i=e(p,l)}else i=a.isFunction(l)?f.call(this,l,c,h):l;if(i instanceof b.Collection){var q=i,r=function(){var a=j(g,h.observe,h);f.call(this,h.update,c,a,g,h)},s=function(){q.off("add remove reset sort",r)},t=function(){s(),q.off("stickit:selectRefresh"),g.off("stickit:selectRefresh")};q.trigger("stickit:selectRefresh"),q.once("stickit:selectRefresh",s,this),q.on("add remove reset sort",r,this),g.trigger("stickit:selectRefresh"),g.once("stickit:selectRefresh",function(){g.off("stickit:unstuck",t)}),g.once("stickit:unstuck",t,this),i=i.toJSON()}if(k.defaultOption){var u=a.isFunction(k.defaultOption)?k.defaultOption.call(this,c,h):k.defaultOption;o(["__default__"],c,u)}if(a.isArray(i))o(i,c,d);else if(i.opt_labels)a.each(i.opt_labels,function(a){var e=b.$("<optgroup/>").attr("label",a);o(i[a],e,d),c.append(e)});else{var v,w=[];for(var x in i)v={},v[k.valuePath]=x,v[k.labelPath]=i[x],w.push(v);w=a.sortBy(w,k.comparator||k.labelPath),o(w,c,d)}},getVal:function(c){var d=c.find("option:selected");return c.prop("multiple")?a.map(d,function(a){return b.$(a).data("stickit-bind-val")}):d.data("stickit-bind-val")}}]),c})},,function(a,b,c){var d=c(88),e=c(19),f=c(2),g=d.extend({className:"loading",initialize:function(){this.on("update:message",this.render),this.timeout=setTimeout(e.bind(this.fail,this),6e4)},render:function(){var a="";return e.isEmpty(this.options.message)||(a="<p>"+this.options.message+"</p>"),this.$el.html('<p><i class="icon icon-spinner icon-lg"></i></p>'+a),this},onBeforeDestroy:function(){clearTimeout(this.timeout)},fail:function(a){a?this.options.message=a:this.options.message="Script Error",this.render(),this.$(".icon").removeClass("icon-spinner").addClass("icon-fail")}});a.exports=g,f.attach("Components.Loading.View",g)},,,,,,,function(a,b,c){function d(a){this.options=a||{}}function e(a){var b;return j.any(["SCREEN","OR_OPEN","OR_CLOSE","GROUP_OPEN","GROUP_CLOSE","OR","PREFIX","RANGE","SPACES","QUOTES","FLAGS"],function(c){return k[c].test(a)?(b=c,!0):(b=void 0,!1)}),b}function f(a){var b=a.pop(),c=a.pop();a.push({type:"or",queries:[c,b]})}function g(a){var b=a.part||{};a.hasarg&&(["range","prange"].indexOf(b.type)>=0?b.to=a.buffer:a.buffer&&a.buffer.length&&(b.query=a.buffer),b.type||(b.type=b.prefix?"prefix":"string"),a.parts.push(b),a.or_at_next_arg&&a.or_at_next_arg+1===a.parts.length&&(f(a.parts),a.or_at_next_arg=0),a.part={},a.buffer="",a.hasarg=!1)}function h(a,b){0!==this._input.length&&(a.character=this._input.shift(),a.character===b?g.call(this,a):(a.buffer+=a.character,a.hasarg=!0,h.call(this,a,b)))}function i(a){a.character=this._input.shift();var b=e.call(this,a.character);return b&&!a.screen?l[b.toLowerCase()].call(this,a):(a.buffer+=a.character,a.hasarg=!0,a.screen=!1),this._input.length>0&&!a.close?void i.call(this,a):void(a.close=void 0)}var j=c(19),k={QUOTES:/['"`]/,SPACES:/[ \t\r\n]/,FLAGS:/[~\+#!\*\/]/,SCREEN:/[\\]/,GROUP_OPEN:/\(/,GROUP_CLOSE:/\)/,OR:/\|/,PREFIX:/:/,RANGE:/-/,OR_OPEN:/\[/,OR_CLOSE:/]/},l={screen:function(a){a.screen=!0},or_open:function(a){a.hasarg?a.buffer+=a.character:(a.part.type="or",a.part.queries=this.parse(this._input.join(""),!0),a.part.queries&&a.part.queries.length&&(a.hasarg=!0,g.call(this,a)))},or_close:function(a){a.close=!0},group_open:function(a){a.hasarg?a.buffer+=a.character:(a.part.type="and",a.part.queries=this.parse(this._input.join(""),!0),a.part.queries&&a.part.queries.length&&(a.hasarg=!0,g.call(this,a)))},group_close:function(a){a.open?(a.close=!0,a.open=void 0):a.buffer+=a.character},or:function(a){a.or_at_next_arg=a.parts.length,a.hasarg&&(a.or_at_next_arg+=1,g.call(this,a))},prefix:function(a){a.part.prefix=a.buffer,a.part.type="prefix",a.buffer="",a.hasarg=!0},range:function(a){a.part.type&&"prefix"===a.part.type?a.part.type="prange":a.part.type="range",a.part.from=a.buffer,a.buffer="",a.hasarg=!0},spaces:function(a){g.call(this,a)},quotes:function(a){a.buffer.length?(a.buffer+=a.character,a.hasarg=!0):h.call(this,a,a.character)},flags:function(a){a.buffer.length?a.buffer+=a.character:(a.part.flags||(a.part.flags=[]),a.part.flags.push(a.character))}},m={parse:function(a,b){var c={parts:[],part:{},open:b,buffer:"",hasarg:!1};return a&&a.length&&"string"==typeof a?(this._input=a.split(""),i.call(this,c),g.call(this,c),c.parts):c.parts}};j.extend(d.prototype,m),a.exports=d},function(a,b,c){function d(a){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;a.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b["long"]?f(a):e(a)}},function(a,b,c){function d(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}a.exports=d},function(a,b,c){function d(a){return f(a)&&e(a)&&i.call(a)==g}var e=c(177),f=c(179),g="[object Arguments]",h=Object.prototype,i=h.toString;a.exports=d},function(a,b,c){var d=c(202),e=c(231),f="[object Object]",g=Object.prototype,h=g.toString,i=d(i=Object.getPrototypeOf)&&i,j=i?function(a){if(!a||h.call(a)!=f)return!1;var b=a.valueOf,c=d(b)&&(c=i(b))&&i(c);return c?a==c||i(a)==c:e(a)}:e;a.exports=j},function(a,b,c){function d(a){return e(a,f(a))}var e=c(232),f=c(233);a.exports=d},function(a,b,c){function d(a){return function(){return a}}a.exports=d},function(a,b,c){function d(a){return null==a?!1:k.call(a)==g?l.test(j.call(a)):f(a)&&h.test(a)}var e=c(234),f=c(179),g="[object Function]",h=/^\[object .+?Constructor\]$/,i=Object.prototype,j=Function.prototype.toString,k=i.toString,l=RegExp("^"+e(k).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");a.exports=d},function(a,b,c){function d(a){return e(a)?a:Object(a)}var e=c(178);a.exports=d},function(a,b,c){function d(a){return"number"==typeof a&&a>-1&&a%1==0&&e>=a}var e=Math.pow(2,53)-1;a.exports=d},function(a,b,c){var d=c(235),e=d("length");a.exports=e},function(a,b,c){function d(a){for(var b=i(a),c=b.length,d=c&&a.length,k=d&&h(d)&&(f(a)||j.nonEnumArgs&&e(a)),m=-1,n=[];++m<c;){var o=b[m];(k&&g(o,d)||l.call(a,o))&&n.push(o)}return n}var e=c(198),f=c(176),g=c(208),h=c(204),i=c(233),j=c(236),k=Object.prototype,l=k.hasOwnProperty;a.exports=d},function(a,b,c){function d(a){return a}a.exports=d},function(a,b,c){function d(a,b){return a=+a,b=null==b?e:b,a>-1&&a%1==0&&b>a}var e=Math.pow(2,53)-1;a.exports=d},,,,,,,,,,,,,,,,,,,,,,,function(a,b,c){function d(a){var b;if(!f(a)||j.call(a)!=g||!i.call(a,"constructor")&&(b=a.constructor,"function"==typeof b&&!(b instanceof b)))return!1;var c;return e(a,function(a,b){c=b}),void 0===c||i.call(a,c)}var e=c(249),f=c(179),g="[object Object]",h=Object.prototype,i=h.hasOwnProperty,j=h.toString;a.exports=d},function(a,b,c){function d(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}a.exports=d},function(a,b,c){function d(a){if(null==a)return[];i(a)||(a=Object(a));var b=a.length;b=b&&h(b)&&(f(a)||j.nonEnumArgs&&e(a))&&b||0;for(var c=a.constructor,d=-1,k="function"==typeof c&&c.prototype===a,m=Array(b),n=b>0;++d<b;)m[d]=d+"";for(var o in a)n&&g(o,b)||"constructor"==o&&(k||!l.call(a,o))||m.push(o);return m}var e=c(198),f=c(176),g=c(208),h=c(204),i=c(178),j=c(236),k=Object.prototype,l=k.hasOwnProperty;a.exports=d},function(a,b,c){function d(a){return a=e(a),a&&g.test(a)?a.replace(f,"\\$&"):a}var e=c(250),f=/[.*+?^${}()|[\]\/\\]/g,g=RegExp(f.source);a.exports=d},function(a,b,c){function d(a){return function(b){return null==b?void 0:b[a]}}a.exports=d},function(a,b,c){(function(b){var c=Object.prototype,d=(d=b.window)&&d.document,e=c.propertyIsEnumerable,f={};!function(a){var b=function(){this.x=a},c=arguments,g=[];b.prototype={valueOf:a,y:a};for(var h in new b)g.push(h);f.funcDecomp=/\bthis\b/.test(function(){return this}),f.funcNames="string"==typeof Function.name;try{f.dom=11===d.createDocumentFragment().nodeType}catch(i){f.dom=!1}try{f.nonEnumArgs=!e.call(c,1)}catch(i){f.nonEnumArgs=!0}}(1,0),a.exports=f}).call(b,function(){return this}())},,,,,,,,,,,,,function(a,b,c){function d(a,b){return e(a,b,f)}var e=c(253),f=c(233);a.exports=d},function(a,b,c){function d(a){return"string"==typeof a?a:null==a?"":a+""}a.exports=d},,,function(a,b,c){var d=c(254),e=d();a.exports=e},function(a,b,c){function d(a){return function(b,c,d){for(var f=e(b),g=d(b),h=g.length,i=a?h:-1;a?i--:++i<h;){var j=g[i];if(c(f[j],j,f)===!1)break}return b}}var e=c(203);a.exports=d}]);